(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{JrXR:function(e,t,s){"use strict";s.r(t),s.d(t,"ManageUsersModule",(function(){return I}));var i=s("ofXK"),c=s("PCNd"),n=s("tyNb"),r=s("y1cd"),o=s("3Pt+"),a=s("fXoL"),b=s("1kSV"),l=s("kmKP"),d=s("SaRM"),u=s("mAmA");function h(e,t){if(1&e){const e=a.Sb();a.Rb(0,"label",18),a.Rb(1,"input",19),a.dc("change",(function(s){a.uc(e);const i=t.$implicit;return a.fc().onChange(s,i)})),a.Qb(),a.Rb(2,"span",20),a.Cc(3),a.Qb(),a.Qb()}if(2&e){const e=t.$implicit;a.zb(1),a.mc("id",e.title),a.zb(2),a.Dc(e.title)}}function g(e,t){1&e&&a.Nb(0,"span",21)}function f(e,t){if(1&e&&(a.Rb(0,"span"),a.Cc(1),a.Qb()),2&e){const e=a.fc();a.zb(1),a.Dc(e.updateButtonText)}}let p=(()=>{class e{constructor(e,t,s,i,c){this.formBuilder=e,this.ngbActiveModal=t,this.userService=s,this.referenceService=i,this.toasterService=c,this.updateButtonText=r.b.UPDATE_BUTTON_TEXT,this.cancelButtonText=r.b.CANCEL_BUTTON_TEXT,this.loading=!1,this.accessControls=[],this.selectedMenuList=[],this.form=this.formBuilder.group({userId:["",[o.q.required]],accessMenus:[""]})}ngOnInit(){this.accessControls=this.referenceService.getAvailableAccessControls(),this.fetchUserActivityByUserId()}fetchUserActivityByUserId(){this.loading=!0,this.userService.fetchUserActivityByUserId(this.userId).subscribe(e=>{const{ProcessVariables:{status:t,message:s={}}}=e;t?(this.setForm(e),this.loading=!1):(this.loading=!1,this.toasterService.showError(s.value))},e=>{this.loading=!1,this.toasterService.showError(e)})}setForm(e){const{ProcessVariables:{activityList:t,roleName:s,userName:i}}=e;this.userDetail={activityList:t,roleName:s,userName:i},this.form.patchValue({userId:i}),this.validateAndSetAttributes()}validateAndSetAttributes(){const{activityList:e}=this.userDetail,t=e.find(e=>1===e),s=e.find(e=>2===e),i=e.find(e=>3===e),c=e.find(e=>4===e),n=document.getElementById("checkboxes").getElementsByTagName("input");t&&(n[0].checked=!0,this.selectedMenuList.push(1)),s&&(n[1].checked=!0,this.selectedMenuList.push(2)),i&&(n[2].checked=!0,this.selectedMenuList.push(3)),c&&(n[3].checked=!0,this.selectedMenuList.push(4)),this.validate()}get fieldControls(){return this.form.controls}onChange(e,t){if(e.target.checked)this.selectedMenuList.push(t.value);else{const e=this.selectedMenuList.findIndex(e=>e===t.value);this.selectedMenuList.splice(e,1)}this.validate()}validate(){const e=this.selectedMenuList.find(e=>3===e),t=this.selectedMenuList.find(e=>4===e),s=document.getElementById(r.d.MARKETING_MAKER),i=document.getElementById(r.d.MARKETING_CHECKER);e&&!t?i.setAttribute("disabled","true"):t&&!e?s.setAttribute("disabled","true"):(s.removeAttribute("disabled"),i.removeAttribute("disabled"))}updateUser(){this.loading=!0,this.userService.updateUser(this.userId,this.selectedMenuList,Number(this.userService.currentUserValue.userId)).subscribe(e=>{const{ProcessVariables:{status:t},ProcessVariables:{message:s={}}}=e;t?(this.toasterService.showSuccess(r.j.UPDATE_USER_SUCCESS),this.loading=!1,this.close(r.g.SUCCESS)):(this.loading=!1,this.toasterService.showError(s.value))},e=>{this.loading=!1,this.toasterService.showError(e)})}close(e){this.ngbActiveModal.close(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(o.c),a.Mb(b.a),a.Mb(l.a),a.Mb(d.a),a.Mb(u.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-user-dialog"]],inputs:{userId:"userId"},decls:25,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],[1,"text-message"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form",3,"formGroup"],[1,"form-group"],["for","userId"],[1,"input-group"],["type","text","formControlName","userId","id","userId","placeholder","Eg: USER0001","autocomplete","off","readonly","",1,"form-control"],["id","checkboxes",1,"row","d-flex"],["class","col-6 checkbox-inline container-checkbox",4,"ngFor","ngForOf"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-confirm","shadow",3,"disabled","click"],["class","spinner-border","style","width: 1rem; height: 1rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-danger","shadow",3,"click"],[1,"col-6","checkbox-inline","container-checkbox"],["type","checkbox","formControlName","accessMenus",1,"mx-1","checkbox-input",3,"id","change"],[1,"checkbox-title"],["aria-hidden","true",1,"spinner-border",2,"width","1rem","height","1rem"]],template:function(e,t){1&e&&(a.Rb(0,"div",0),a.Rb(1,"h4",1),a.Cc(2," Edit User - "),a.Rb(3,"span",2),a.Cc(4),a.Qb(),a.Qb(),a.Rb(5,"button",3),a.dc("click",(function(){return t.close()})),a.Rb(6,"span",4),a.Cc(7,"\xd7"),a.Qb(),a.Qb(),a.Qb(),a.Rb(8,"div",5),a.Rb(9,"form",6),a.Rb(10,"div",7),a.Rb(11,"label",8),a.Cc(12,"USER ID"),a.Qb(),a.Rb(13,"div",9),a.Nb(14,"input",10),a.Qb(),a.Qb(),a.Rb(15,"label"),a.Cc(16,"ACCESS CONTROLS"),a.Qb(),a.Rb(17,"div",11),a.Ac(18,h,4,2,"label",12),a.Qb(),a.Qb(),a.Qb(),a.Rb(19,"div",13),a.Rb(20,"button",14),a.dc("click",(function(){return t.updateUser()})),a.Ac(21,g,1,0,"span",15),a.Ac(22,f,2,1,"span",16),a.Qb(),a.Rb(23,"button",17),a.dc("click",(function(){return t.close()})),a.Cc(24),a.Qb(),a.Qb()),2&e&&(a.zb(4),a.Dc(t.userDetail&&t.userDetail.userName),a.zb(5),a.lc("formGroup",t.form),a.zb(9),a.lc("ngForOf",t.accessControls),a.zb(2),a.lc("disabled",t.form.invalid||0===t.selectedMenuList.length||t.loading),a.zb(1),a.lc("ngIf",t.loading),a.zb(1),a.lc("ngIf",!t.loading),a.zb(2),a.Ec(" ",t.cancelButtonText," "))},directives:[o.s,o.l,o.g,o.b,o.k,o.e,i.j,i.k,o.a],styles:[".checkbox-title[_ngcontent-%COMP%]{font-size:16px;color:#212529}"]}),e})();function m(e,t){1&e&&a.Nb(0,"span",11)}function v(e,t){if(1&e&&(a.Rb(0,"span"),a.Cc(1),a.Qb()),2&e){const e=a.fc();a.zb(1),a.Dc(e.disableButtonText)}}let S=(()=>{class e{constructor(e,t,s){this.ngbActiveModal=e,this.userService=t,this.toasterService=s,this.disableButtonText=r.b.DISABLE_BUTTON_TEXT,this.cancelButtonText=r.b.CANCEL_BUTTON_TEXT,this.loading=!1}ngOnInit(){}disableUser(){this.loading=!0,this.userService.disableUserById(this.userId,Number(this.userService.currentUserValue.userId)).subscribe(e=>{const{ProcessVariables:{status:t},ProcessVariables:{message:s={}}}=e;t?(this.toasterService.showSuccess(r.j.DISABLE_USER_SUCCESS),this.loading=!1,this.close(r.g.SUCCESS)):(this.loading=!1,this.toasterService.showError(s.value))},e=>{this.loading=!1,this.toasterService.showError(e)})}close(e){this.ngbActiveModal.close(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(b.a),a.Mb(l.a),a.Mb(u.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-disable-user-dialog"]],inputs:{userId:"userId",userName:"userName"},decls:15,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"text-message"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-confirm","shadow",3,"disabled","click"],["class","spinner-border","style","width: 1rem; height: 1rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-danger","shadow",3,"click"],["aria-hidden","true",1,"spinner-border",2,"width","1rem","height","1rem"]],template:function(e,t){1&e&&(a.Rb(0,"div",0),a.Rb(1,"h4",1),a.Cc(2," Do you want to disable user? "),a.Qb(),a.Rb(3,"button",2),a.dc("click",(function(){return t.close()})),a.Rb(4,"span",3),a.Cc(5,"\xd7"),a.Qb(),a.Qb(),a.Qb(),a.Rb(6,"div",4),a.Rb(7,"span",5),a.Cc(8),a.Qb(),a.Qb(),a.Rb(9,"div",6),a.Rb(10,"button",7),a.dc("click",(function(){return t.disableUser()})),a.Ac(11,m,1,0,"span",8),a.Ac(12,v,2,1,"span",9),a.Qb(),a.Rb(13,"button",10),a.dc("click",(function(){return t.close()})),a.Cc(14),a.Qb(),a.Qb()),2&e&&(a.zb(8),a.Ec("Any information associated with account ",t.userName," will be deleted."),a.zb(2),a.lc("disabled",t.loading),a.zb(1),a.lc("ngIf",t.loading),a.zb(1),a.lc("ngIf",!t.loading),a.zb(2),a.Ec(" ",t.cancelButtonText," "))},directives:[i.k],styles:[""]}),e})();function C(e,t){1&e&&a.Nb(0,"ngb-progressbar",13),2&e&&a.lc("value",100)("striped",!0)("animated",!0)}function R(e,t){if(1&e){const e=a.Sb();a.Rb(0,"tr",6),a.Rb(1,"td",7),a.Cc(2),a.Qb(),a.Rb(3,"td",8),a.Cc(4),a.Qb(),a.Rb(5,"td",8),a.Cc(6),a.Qb(),a.Rb(7,"td",8),a.Cc(8),a.gc(9,"date"),a.Qb(),a.Rb(10,"td",9),a.Rb(11,"button",14),a.dc("click",(function(){a.uc(e);const s=t.$implicit;return a.fc().editUser(s)})),a.Cc(12),a.Qb(),a.Rb(13,"button",15),a.dc("click",(function(){a.uc(e);const s=t.$implicit;return a.fc().disableUser(s)})),a.Cc(14),a.Qb(),a.Qb(),a.Qb()}if(2&e){const e=t.$implicit,s=t.index,i=a.fc();a.zb(2),a.Dc(s+1),a.zb(2),a.Dc(e.username),a.zb(2),a.Dc(e.role),a.zb(2),a.Dc(a.ic(9,6,e.created_at,"medium")),a.zb(4),a.Ec(" ",i.editButtontext," "),a.zb(2),a.Ec(" ",i.disableUserButtonText," ")}}const E=[{path:"",component:(()=>{class e{constructor(e,t,s){this.ngbDialog=e,this.userService=t,this.toasterService=s,this.editButtontext=r.b.EDIT_BUTTON_TEXT,this.disableUserButtonText=r.b.DISABLE_BUTTON_TEXT,this.loading=!1,this.currentPage=1,this.pageSize=10}ngOnInit(){this.fetchUsers(this.currentPage)}fetchUsers(e){window.scroll(0,0),this.loading=!0,this.userService.fetchUsers(this.pageSize,e).subscribe(e=>{const{ProcessVariables:{status:t,message:s={}}}=e;if(t){const{ProcessVariables:{usersList:t,totalCount:s}}=e;this.collectionSize=s,this.usersList=t,this.loading=!1}else this.loading=!1,this.toasterService.showError(s.value)},e=>{this.loading=!1,this.toasterService.showError(e)})}editUser({userId:e}){const t=this.ngbDialog.open(p,{centered:!0});t.componentInstance.userId=e,t.result.then(e=>{e===r.g.SUCCESS&&this.fetchUsers(this.currentPage)})}disableUser({userId:e,username:t}){const s=this.ngbDialog.open(S,{centered:!0});s.componentInstance.userId=e,s.componentInstance.userName=t,s.result.then(e=>{e===r.g.SUCCESS&&this.fetchUsers(this.currentPage)})}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(b.c),a.Mb(l.a),a.Mb(u.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-manage-users"]],decls:23,vars:6,consts:[[1,"main"],[1,"container"],[1,"row"],[1,"col","card","shadow","p-0","mt-2"],["type","dark","height","0.5rem",3,"value","striped","animated",4,"ngIf"],[1,"table","table-striped"],[1,"d-flex"],[1,"col-1"],[1,"col-3"],[1,"col-2"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","p-2"],[3,"boundaryLinks","collectionSize","page","pageSize","pageChange"],["type","dark","height","0.5rem",3,"value","striped","animated"],[1,"shadow",3,"click"],[1,"ml-2","shadow",3,"click"]],template:function(e,t){1&e&&(a.Rb(0,"div",0),a.Rb(1,"h2"),a.Cc(2,"Manage Users"),a.Qb(),a.Rb(3,"div",1),a.Rb(4,"div",2),a.Rb(5,"div",3),a.Ac(6,C,1,3,"ngb-progressbar",4),a.Rb(7,"table",5),a.Rb(8,"thead"),a.Rb(9,"tr",6),a.Rb(10,"th",7),a.Cc(11,"S.NO"),a.Qb(),a.Rb(12,"th",8),a.Cc(13,"USER ID"),a.Qb(),a.Rb(14,"th",8),a.Cc(15,"ROLE"),a.Qb(),a.Rb(16,"th",8),a.Cc(17,"CREATED ON"),a.Qb(),a.Rb(18,"th",9),a.Cc(19,"ACTION"),a.Qb(),a.Qb(),a.Qb(),a.Ac(20,R,15,9,"tr",10),a.Qb(),a.Rb(21,"div",11),a.Rb(22,"ngb-pagination",12),a.dc("pageChange",(function(e){return t.currentPage=e}))("pageChange",(function(){return t.fetchUsers(t.currentPage)})),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb()),2&e&&(a.zb(6),a.lc("ngIf",t.loading),a.zb(14),a.lc("ngForOf",t.usersList),a.zb(2),a.lc("boundaryLinks",!0)("collectionSize",t.collectionSize)("page",t.currentPage)("pageSize",t.pageSize))},directives:[i.k,i.j,b.e,b.f],pipes:[i.d],styles:["table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;font-size:14px;background-color:#97144d;border:1px solid #97144d}"]}),e})(),pathMatch:"full"}];let Q=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},imports:[[n.e.forChild(E)],n.e]}),e})(),I=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},imports:[[i.b,c.a,Q]]}),e})()}}]);