(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{JrXR:function(e,t,s){"use strict";s.r(t),s.d(t,"ManageUsersModule",(function(){return E}));var i=s("ofXK"),c=s("PCNd"),n=s("tyNb"),r=s("y1cd"),o=s("3Pt+"),a=s("fXoL"),b=s("1kSV"),l=s("kmKP"),d=s("SaRM"),u=s("mAmA");function h(e,t){if(1&e){const e=a.Vb();a.Ub(0,"label",18),a.Ub(1,"input",19),a.gc("change",(function(s){a.Ac(e);const i=t.$implicit;return a.jc().onChange(s,i)})),a.Tb(),a.Ub(2,"span",20),a.Jc(3),a.Tb(),a.Tb()}if(2&e){const e=t.$implicit;a.Bb(1),a.qc("id",e.title),a.Bb(2),a.Kc(e.title)}}function g(e,t){1&e&&a.Qb(0,"span",21)}function p(e,t){if(1&e&&(a.Ub(0,"span"),a.Jc(1),a.Tb()),2&e){const e=a.jc();a.Bb(1),a.Kc(e.updateButtonText)}}let f=(()=>{class e{constructor(e,t,s,i,c){this.formBuilder=e,this.ngbActiveModal=t,this.userService=s,this.referenceService=i,this.toasterService=c,this.updateButtonText=r.b.UPDATE_BUTTON_TEXT,this.cancelButtonText=r.b.CANCEL_BUTTON_TEXT,this.loading=!1,this.accessControls=[],this.selectedMenuList=[],this.form=this.formBuilder.group({userId:["",[o.u.required]],accessMenus:[""]})}ngOnInit(){this.accessControls=this.referenceService.getAvailableAccessControls(),this.fetchUserActivityByUserId()}fetchUserActivityByUserId(){this.loading=!0,this.userService.fetchUserActivityByUserId(this.userId).subscribe(e=>{const{ProcessVariables:{status:t,message:s={}}}=e;t?(this.setForm(e),this.loading=!1):(this.loading=!1,this.toasterService.showError(s.value))},e=>{this.loading=!1,this.toasterService.showError(e)})}setForm(e){const{ProcessVariables:{activityList:t,roleName:s,userName:i}}=e;this.userDetail={activityList:t,roleName:s,userName:i},this.form.patchValue({userId:i}),this.validateAndSetAttributes()}validateAndSetAttributes(){const{activityList:e}=this.userDetail,t=e.find(e=>1===e),s=e.find(e=>2===e),i=e.find(e=>3===e),c=e.find(e=>4===e),n=document.getElementById("checkboxes").getElementsByTagName("input");t&&(n[0].checked=!0,this.selectedMenuList.push(1)),s&&(n[1].checked=!0,this.selectedMenuList.push(2)),i&&(n[2].checked=!0,this.selectedMenuList.push(3)),c&&(n[3].checked=!0,this.selectedMenuList.push(4)),this.validate()}get fieldControls(){return this.form.controls}onChange(e,t){if(e.target.checked)this.selectedMenuList.push(t.value);else{const e=this.selectedMenuList.findIndex(e=>e===t.value);this.selectedMenuList.splice(e,1)}this.validate()}validate(){const e=this.selectedMenuList.find(e=>3===e),t=this.selectedMenuList.find(e=>4===e),s=document.getElementById(r.d.MARKETING_MAKER),i=document.getElementById(r.d.MARKETING_CHECKER);e&&!t?i.setAttribute("disabled","true"):t&&!e?s.setAttribute("disabled","true"):(s.removeAttribute("disabled"),i.removeAttribute("disabled"))}updateUser(){this.loading=!0,this.userService.updateUser(this.userId,this.selectedMenuList,Number(this.userService.currentUserValue.userId)).subscribe(e=>{const{ProcessVariables:{status:t},ProcessVariables:{message:s={}}}=e;t?(this.toasterService.showSuccess(r.j.UPDATE_USER_SUCCESS),this.loading=!1,this.close(r.g.SUCCESS)):(this.loading=!1,this.toasterService.showError(s.value))},e=>{this.loading=!1,this.toasterService.showError(e)})}close(e){this.ngbActiveModal.close(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(o.c),a.Pb(b.a),a.Pb(l.a),a.Pb(d.a),a.Pb(u.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-user-dialog"]],inputs:{userId:"userId"},decls:25,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],[1,"text-message"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form",3,"formGroup"],[1,"form-group"],["for","userId"],[1,"input-group"],["type","text","formControlName","userId","id","userId","placeholder","Eg: USER0001","autocomplete","off","readonly","",1,"form-control"],["id","checkboxes",1,"row","d-flex"],["class","col-6 checkbox-inline container-checkbox",4,"ngFor","ngForOf"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-confirm","shadow",3,"disabled","click"],["class","spinner-border","style","width: 1rem; height: 1rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-danger","shadow",3,"click"],[1,"col-6","checkbox-inline","container-checkbox"],["type","checkbox","formControlName","accessMenus",1,"mx-1","checkbox-input",3,"id","change"],[1,"checkbox-title"],["aria-hidden","true",1,"spinner-border",2,"width","1rem","height","1rem"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"h4",1),a.Jc(2," Edit User - "),a.Ub(3,"span",2),a.Jc(4),a.Tb(),a.Tb(),a.Ub(5,"button",3),a.gc("click",(function(){return t.close()})),a.Ub(6,"span",4),a.Jc(7,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(8,"div",5),a.Ub(9,"form",6),a.Ub(10,"div",7),a.Ub(11,"label",8),a.Jc(12,"USER ID"),a.Tb(),a.Ub(13,"div",9),a.Qb(14,"input",10),a.Tb(),a.Tb(),a.Ub(15,"label"),a.Jc(16,"ACCESS CONTROLS"),a.Tb(),a.Ub(17,"div",11),a.Hc(18,h,4,2,"label",12),a.Tb(),a.Tb(),a.Tb(),a.Ub(19,"div",13),a.Ub(20,"button",14),a.gc("click",(function(){return t.updateUser()})),a.Hc(21,g,1,0,"span",15),a.Hc(22,p,2,1,"span",16),a.Tb(),a.Ub(23,"button",17),a.gc("click",(function(){return t.close()})),a.Jc(24),a.Tb(),a.Tb()),2&e&&(a.Bb(4),a.Kc(t.userDetail&&t.userDetail.userName),a.Bb(5),a.pc("formGroup",t.form),a.Bb(9),a.pc("ngForOf",t.accessControls),a.Bb(2),a.pc("disabled",t.form.invalid||0===t.selectedMenuList.length||t.loading),a.Bb(1),a.pc("ngIf",t.loading),a.Bb(1),a.pc("ngIf",!t.loading),a.Bb(2),a.Lc(" ",t.cancelButtonText," "))},directives:[o.w,o.n,o.h,o.b,o.m,o.f,i.l,i.m,o.a],styles:[".checkbox-title[_ngcontent-%COMP%]{font-size:16px;color:#212529}"]}),e})();function m(e,t){1&e&&a.Qb(0,"span",11)}function U(e,t){if(1&e&&(a.Ub(0,"span"),a.Jc(1),a.Tb()),2&e){const e=a.jc();a.Bb(1),a.Kc(e.disableButtonText)}}let T=(()=>{class e{constructor(e,t,s){this.ngbActiveModal=e,this.userService=t,this.toasterService=s,this.disableButtonText=r.b.DISABLE_BUTTON_TEXT,this.cancelButtonText=r.b.CANCEL_BUTTON_TEXT,this.loading=!1}ngOnInit(){}disableUser(){this.loading=!0,this.userService.disableUserById(this.userId,Number(this.userService.currentUserValue.userId)).subscribe(e=>{const{ProcessVariables:{status:t},ProcessVariables:{message:s={}}}=e;t?(this.toasterService.showSuccess(r.j.DISABLE_USER_SUCCESS),this.loading=!1,this.close(r.g.SUCCESS)):(this.loading=!1,this.toasterService.showError(s.value))},e=>{this.loading=!1,this.toasterService.showError(e)})}close(e){this.ngbActiveModal.close(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(b.a),a.Pb(l.a),a.Pb(u.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-disable-user-dialog"]],inputs:{userId:"userId",userName:"userName"},decls:15,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"text-message"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-confirm","shadow",3,"disabled","click"],["class","spinner-border","style","width: 1rem; height: 1rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-danger","shadow",3,"click"],["aria-hidden","true",1,"spinner-border",2,"width","1rem","height","1rem"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"h4",1),a.Jc(2," Do you want to disable user? "),a.Tb(),a.Ub(3,"button",2),a.gc("click",(function(){return t.close()})),a.Ub(4,"span",3),a.Jc(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",4),a.Ub(7,"span",5),a.Jc(8),a.Tb(),a.Tb(),a.Ub(9,"div",6),a.Ub(10,"button",7),a.gc("click",(function(){return t.disableUser()})),a.Hc(11,m,1,0,"span",8),a.Hc(12,U,2,1,"span",9),a.Tb(),a.Ub(13,"button",10),a.gc("click",(function(){return t.close()})),a.Jc(14),a.Tb(),a.Tb()),2&e&&(a.Bb(8),a.Lc("Any information associated with account ",t.userName," will be deleted."),a.Bb(2),a.pc("disabled",t.loading),a.Bb(1),a.pc("ngIf",t.loading),a.Bb(1),a.pc("ngIf",!t.loading),a.Bb(2),a.Lc(" ",t.cancelButtonText," "))},directives:[i.m],styles:[""]}),e})();function v(e,t){1&e&&a.Qb(0,"ngb-progressbar",13),2&e&&a.pc("value",100)("striped",!0)("animated",!0)}function S(e,t){if(1&e){const e=a.Vb();a.Ub(0,"tr",6),a.Ub(1,"td",7),a.Jc(2),a.Tb(),a.Ub(3,"td",8),a.Jc(4),a.Tb(),a.Ub(5,"td",8),a.Jc(6),a.Tb(),a.Ub(7,"td",8),a.Jc(8),a.kc(9,"date"),a.Tb(),a.Ub(10,"td",9),a.Ub(11,"button",14),a.gc("click",(function(){a.Ac(e);const s=t.$implicit;return a.jc().editUser(s)})),a.Jc(12),a.Tb(),a.Ub(13,"button",15),a.gc("click",(function(){a.Ac(e);const s=t.$implicit;return a.jc().disableUser(s)})),a.Jc(14),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=t.$implicit,s=t.index,i=a.jc();a.Bb(2),a.Kc(s+1),a.Bb(2),a.Kc(e.username),a.Bb(2),a.Kc(e.role),a.Bb(2),a.Kc(a.mc(9,6,e.created_at,"medium")),a.Bb(4),a.Lc(" ",i.editButtontext," "),a.Bb(2),a.Lc(" ",i.disableUserButtonText," ")}}const B=[{path:"",component:(()=>{class e{constructor(e,t,s){this.ngbDialog=e,this.userService=t,this.toasterService=s,this.editButtontext=r.b.EDIT_BUTTON_TEXT,this.disableUserButtonText=r.b.DISABLE_BUTTON_TEXT,this.loading=!1,this.currentPage=1,this.pageSize=10}ngOnInit(){this.fetchUsers(this.currentPage)}fetchUsers(e){window.scroll(0,0),this.loading=!0,this.userService.fetchUsers(this.pageSize,e).subscribe(e=>{const{ProcessVariables:{status:t,message:s={}}}=e;if(t){const{ProcessVariables:{usersList:t,totalCount:s}}=e;this.collectionSize=s,this.usersList=t,this.loading=!1}else this.loading=!1,this.toasterService.showError(s.value)},e=>{this.loading=!1,this.toasterService.showError(e)})}editUser({userId:e}){const t=this.ngbDialog.open(f,{centered:!0});t.componentInstance.userId=e,t.result.then(e=>{e===r.g.SUCCESS&&this.fetchUsers(this.currentPage)})}disableUser({userId:e,username:t}){const s=this.ngbDialog.open(T,{centered:!0});s.componentInstance.userId=e,s.componentInstance.userName=t,s.result.then(e=>{e===r.g.SUCCESS&&this.fetchUsers(this.currentPage)})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(b.c),a.Pb(l.a),a.Pb(u.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-manage-users"]],decls:23,vars:6,consts:[[1,"main"],[1,"container"],[1,"row"],[1,"col","card","shadow","p-0","mt-2"],["type","dark","height","0.5rem",3,"value","striped","animated",4,"ngIf"],[1,"table","table-striped"],[1,"d-flex"],[1,"col-1"],[1,"col-3"],[1,"col-2"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","p-2"],[3,"boundaryLinks","collectionSize","page","pageSize","pageChange"],["type","dark","height","0.5rem",3,"value","striped","animated"],[1,"shadow",3,"click"],[1,"ml-2","shadow",3,"click"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"h2"),a.Jc(2,"Manage Users"),a.Tb(),a.Ub(3,"div",1),a.Ub(4,"div",2),a.Ub(5,"div",3),a.Hc(6,v,1,3,"ngb-progressbar",4),a.Ub(7,"table",5),a.Ub(8,"thead"),a.Ub(9,"tr",6),a.Ub(10,"th",7),a.Jc(11,"S.NO"),a.Tb(),a.Ub(12,"th",8),a.Jc(13,"USER ID"),a.Tb(),a.Ub(14,"th",8),a.Jc(15,"ROLE"),a.Tb(),a.Ub(16,"th",8),a.Jc(17,"CREATED ON"),a.Tb(),a.Ub(18,"th",9),a.Jc(19,"ACTION"),a.Tb(),a.Tb(),a.Tb(),a.Hc(20,S,15,9,"tr",10),a.Tb(),a.Ub(21,"div",11),a.Ub(22,"ngb-pagination",12),a.gc("pageChange",(function(e){return t.currentPage=e}))("pageChange",(function(){return t.fetchUsers(t.currentPage)})),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Bb(6),a.pc("ngIf",t.loading),a.Bb(14),a.pc("ngForOf",t.usersList),a.Bb(2),a.pc("boundaryLinks",!0)("collectionSize",t.collectionSize)("page",t.currentPage)("pageSize",t.pageSize))},directives:[i.m,i.l,b.e,b.f],pipes:[i.e],styles:["table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;font-size:14px;background-color:#97144d;border:1px solid #97144d}"]}),e})(),pathMatch:"full"}];let I=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[n.e.forChild(B)],n.e]}),e})(),E=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[i.c,c.a,I]]}),e})()}}]);