function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{JrXR:function(e,t,i){"use strict";i.r(t),i.d(t,"ManageUsersModule",(function(){return A}));var n=i("ofXK"),s=i("PCNd"),r=i("tyNb"),c=i("y1cd"),a=i("3Pt+"),o=i("fXoL"),u=i("1kSV"),l=i("kmKP"),b=i("SaRM"),d=i("mAmA");function h(e,t){if(1&e){var i=o.Vb();o.Ub(0,"label",18),o.Ub(1,"input",19),o.gc("change",(function(e){o.Ac(i);var n=t.$implicit;return o.jc().onChange(e,n)})),o.Tb(),o.Ub(2,"span",20),o.Jc(3),o.Tb(),o.Tb()}if(2&e){var n=t.$implicit;o.Bb(1),o.qc("id",n.title),o.Bb(2),o.Kc(n.title)}}function f(e,t){1&e&&o.Qb(0,"span",21)}function g(e,t){if(1&e&&(o.Ub(0,"span"),o.Jc(1),o.Tb()),2&e){var i=o.jc();o.Bb(1),o.Kc(i.updateButtonText)}}var p,v=((p=function(){function e(t,i,n,s,r){_classCallCheck(this,e),this.formBuilder=t,this.ngbActiveModal=i,this.userService=n,this.referenceService=s,this.toasterService=r,this.updateButtonText=c.b.UPDATE_BUTTON_TEXT,this.cancelButtonText=c.b.CANCEL_BUTTON_TEXT,this.loading=!1,this.accessControls=[],this.selectedMenuList=[],this.form=this.formBuilder.group({userId:["",[a.u.required]],accessMenus:[""]})}return _createClass(e,[{key:"ngOnInit",value:function(){this.accessControls=this.referenceService.getAvailableAccessControls(),this.fetchUserActivityByUserId()}},{key:"fetchUserActivityByUserId",value:function(){var e=this;this.loading=!0,this.userService.fetchUserActivityByUserId(this.userId).subscribe((function(t){var i=t.ProcessVariables,n=i.status,s=i.message,r=void 0===s?{}:s;n?(e.setForm(t),e.loading=!1):(e.loading=!1,e.toasterService.showError(r.value))}),(function(t){e.loading=!1,e.toasterService.showError(t)}))}},{key:"setForm",value:function(e){var t=e.ProcessVariables,i=t.activityList,n=t.roleName,s=t.userName;this.userDetail={activityList:i,roleName:n,userName:s},this.form.patchValue({userId:s}),this.validateAndSetAttributes()}},{key:"validateAndSetAttributes",value:function(){var e=this.userDetail.activityList,t=e.find((function(e){return 1===e})),i=e.find((function(e){return 2===e})),n=e.find((function(e){return 3===e})),s=e.find((function(e){return 4===e})),r=document.getElementById("checkboxes").getElementsByTagName("input");t&&(r[0].checked=!0,this.selectedMenuList.push(1)),i&&(r[1].checked=!0,this.selectedMenuList.push(2)),n&&(r[2].checked=!0,this.selectedMenuList.push(3)),s&&(r[3].checked=!0,this.selectedMenuList.push(4)),this.validate()}},{key:"onChange",value:function(e,t){if(e.target.checked)this.selectedMenuList.push(t.value);else{var i=this.selectedMenuList.findIndex((function(e){return e===t.value}));this.selectedMenuList.splice(i,1)}this.validate()}},{key:"validate",value:function(){var e=this.selectedMenuList.find((function(e){return 3===e})),t=this.selectedMenuList.find((function(e){return 4===e})),i=document.getElementById(c.d.MARKETING_MAKER),n=document.getElementById(c.d.MARKETING_CHECKER);e&&!t?n.setAttribute("disabled","true"):t&&!e?i.setAttribute("disabled","true"):(i.removeAttribute("disabled"),n.removeAttribute("disabled"))}},{key:"updateUser",value:function(){var e=this;this.loading=!0,this.userService.updateUser(this.userId,this.selectedMenuList,Number(this.userService.currentUserValue.userId)).subscribe((function(t){var i=t.ProcessVariables.status,n=t.ProcessVariables.message,s=void 0===n?{}:n;i?(e.toasterService.showSuccess(c.j.UPDATE_USER_SUCCESS),e.loading=!1,e.close(c.g.SUCCESS)):(e.loading=!1,e.toasterService.showError(s.value))}),(function(t){e.loading=!1,e.toasterService.showError(t)}))}},{key:"close",value:function(e){this.ngbActiveModal.close(e)}},{key:"fieldControls",get:function(){return this.form.controls}}]),e}()).\u0275fac=function(e){return new(e||p)(o.Pb(a.c),o.Pb(u.a),o.Pb(l.a),o.Pb(b.a),o.Pb(d.a))},p.\u0275cmp=o.Jb({type:p,selectors:[["app-user-dialog"]],inputs:{userId:"userId"},decls:25,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],[1,"text-message"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form",3,"formGroup"],[1,"form-group"],["for","userId"],[1,"input-group"],["type","text","formControlName","userId","id","userId","placeholder","Eg: USER0001","autocomplete","off","readonly","",1,"form-control"],["id","checkboxes",1,"row","d-flex"],["class","col-6 checkbox-inline container-checkbox",4,"ngFor","ngForOf"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-confirm","shadow",3,"disabled","click"],["class","spinner-border","style","width: 1rem; height: 1rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-danger","shadow",3,"click"],[1,"col-6","checkbox-inline","container-checkbox"],["type","checkbox","formControlName","accessMenus",1,"mx-1","checkbox-input",3,"id","change"],[1,"checkbox-title"],["aria-hidden","true",1,"spinner-border",2,"width","1rem","height","1rem"]],template:function(e,t){1&e&&(o.Ub(0,"div",0),o.Ub(1,"h4",1),o.Jc(2," Edit User - "),o.Ub(3,"span",2),o.Jc(4),o.Tb(),o.Tb(),o.Ub(5,"button",3),o.gc("click",(function(){return t.close()})),o.Ub(6,"span",4),o.Jc(7,"\xd7"),o.Tb(),o.Tb(),o.Tb(),o.Ub(8,"div",5),o.Ub(9,"form",6),o.Ub(10,"div",7),o.Ub(11,"label",8),o.Jc(12,"USER ID"),o.Tb(),o.Ub(13,"div",9),o.Qb(14,"input",10),o.Tb(),o.Tb(),o.Ub(15,"label"),o.Jc(16,"ACCESS CONTROLS"),o.Tb(),o.Ub(17,"div",11),o.Hc(18,h,4,2,"label",12),o.Tb(),o.Tb(),o.Tb(),o.Ub(19,"div",13),o.Ub(20,"button",14),o.gc("click",(function(){return t.updateUser()})),o.Hc(21,f,1,0,"span",15),o.Hc(22,g,2,1,"span",16),o.Tb(),o.Ub(23,"button",17),o.gc("click",(function(){return t.close()})),o.Jc(24),o.Tb(),o.Tb()),2&e&&(o.Bb(4),o.Kc(t.userDetail&&t.userDetail.userName),o.Bb(5),o.pc("formGroup",t.form),o.Bb(9),o.pc("ngForOf",t.accessControls),o.Bb(2),o.pc("disabled",t.form.invalid||0===t.selectedMenuList.length||t.loading),o.Bb(1),o.pc("ngIf",t.loading),o.Bb(1),o.pc("ngIf",!t.loading),o.Bb(2),o.Lc(" ",t.cancelButtonText," "))},directives:[a.w,a.n,a.h,a.b,a.m,a.f,n.l,n.m,a.a],styles:[".checkbox-title[_ngcontent-%COMP%]{font-size:16px;color:#212529}"]}),p);function m(e,t){1&e&&o.Qb(0,"span",11)}function U(e,t){if(1&e&&(o.Ub(0,"span"),o.Jc(1),o.Tb()),2&e){var i=o.jc();o.Bb(1),o.Kc(i.disableButtonText)}}var T,S=((T=function(){function e(t,i,n){_classCallCheck(this,e),this.ngbActiveModal=t,this.userService=i,this.toasterService=n,this.disableButtonText=c.b.DISABLE_BUTTON_TEXT,this.cancelButtonText=c.b.CANCEL_BUTTON_TEXT,this.loading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"disableUser",value:function(){var e=this;this.loading=!0,this.userService.disableUserById(this.userId,Number(this.userService.currentUserValue.userId)).subscribe((function(t){var i=t.ProcessVariables.status,n=t.ProcessVariables.message,s=void 0===n?{}:n;i?(e.toasterService.showSuccess(c.j.DISABLE_USER_SUCCESS),e.loading=!1,e.close(c.g.SUCCESS)):(e.loading=!1,e.toasterService.showError(s.value))}),(function(t){e.loading=!1,e.toasterService.showError(t)}))}},{key:"close",value:function(e){this.ngbActiveModal.close(e)}}]),e}()).\u0275fac=function(e){return new(e||T)(o.Pb(u.a),o.Pb(l.a),o.Pb(d.a))},T.\u0275cmp=o.Jb({type:T,selectors:[["app-disable-user-dialog"]],inputs:{userId:"userId",userName:"userName"},decls:15,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"text-message"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-confirm","shadow",3,"disabled","click"],["class","spinner-border","style","width: 1rem; height: 1rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-danger","shadow",3,"click"],["aria-hidden","true",1,"spinner-border",2,"width","1rem","height","1rem"]],template:function(e,t){1&e&&(o.Ub(0,"div",0),o.Ub(1,"h4",1),o.Jc(2," Do you want to disable user? "),o.Tb(),o.Ub(3,"button",2),o.gc("click",(function(){return t.close()})),o.Ub(4,"span",3),o.Jc(5,"\xd7"),o.Tb(),o.Tb(),o.Tb(),o.Ub(6,"div",4),o.Ub(7,"span",5),o.Jc(8),o.Tb(),o.Tb(),o.Ub(9,"div",6),o.Ub(10,"button",7),o.gc("click",(function(){return t.disableUser()})),o.Hc(11,m,1,0,"span",8),o.Hc(12,U,2,1,"span",9),o.Tb(),o.Ub(13,"button",10),o.gc("click",(function(){return t.close()})),o.Jc(14),o.Tb(),o.Tb()),2&e&&(o.Bb(8),o.Lc("Any information associated with account ",t.userName," will be deleted."),o.Bb(2),o.pc("disabled",t.loading),o.Bb(1),o.pc("ngIf",t.loading),o.Bb(1),o.pc("ngIf",!t.loading),o.Bb(2),o.Lc(" ",t.cancelButtonText," "))},directives:[n.m],styles:[""]}),T);function k(e,t){1&e&&o.Qb(0,"ngb-progressbar",13),2&e&&o.pc("value",100)("striped",!0)("animated",!0)}function y(e,t){if(1&e){var i=o.Vb();o.Ub(0,"tr",6),o.Ub(1,"td",7),o.Jc(2),o.Tb(),o.Ub(3,"td",8),o.Jc(4),o.Tb(),o.Ub(5,"td",8),o.Jc(6),o.Tb(),o.Ub(7,"td",8),o.Jc(8),o.kc(9,"date"),o.Tb(),o.Ub(10,"td",9),o.Ub(11,"button",14),o.gc("click",(function(){o.Ac(i);var e=t.$implicit;return o.jc().editUser(e)})),o.Jc(12),o.Tb(),o.Ub(13,"button",15),o.gc("click",(function(){o.Ac(i);var e=t.$implicit;return o.jc().disableUser(e)})),o.Jc(14),o.Tb(),o.Tb(),o.Tb()}if(2&e){var n=t.$implicit,s=t.index,r=o.jc();o.Bb(2),o.Kc(s+1),o.Bb(2),o.Kc(n.username),o.Bb(2),o.Kc(n.role),o.Bb(2),o.Kc(o.mc(9,6,n.created_at,"medium")),o.Bb(4),o.Lc(" ",r.editButtontext," "),o.Bb(2),o.Lc(" ",r.disableUserButtonText," ")}}var C,B,I,E=[{path:"",component:(C=function(){function e(t,i,n){_classCallCheck(this,e),this.ngbDialog=t,this.userService=i,this.toasterService=n,this.editButtontext=c.b.EDIT_BUTTON_TEXT,this.disableUserButtonText=c.b.DISABLE_BUTTON_TEXT,this.loading=!1,this.currentPage=1,this.pageSize=10}return _createClass(e,[{key:"ngOnInit",value:function(){this.fetchUsers(this.currentPage)}},{key:"fetchUsers",value:function(e){var t=this;window.scroll(0,0),this.loading=!0,this.userService.fetchUsers(this.pageSize,e).subscribe((function(e){var i=e.ProcessVariables,n=i.status,s=i.message,r=void 0===s?{}:s;if(n){var c=e.ProcessVariables,a=c.usersList,o=c.totalCount;t.collectionSize=o,t.usersList=a,t.loading=!1}else t.loading=!1,t.toasterService.showError(r.value)}),(function(e){t.loading=!1,t.toasterService.showError(e)}))}},{key:"editUser",value:function(e){var t=this,i=e.userId,n=this.ngbDialog.open(v,{centered:!0});n.componentInstance.userId=i,n.result.then((function(e){e===c.g.SUCCESS&&t.fetchUsers(t.currentPage)}))}},{key:"disableUser",value:function(e){var t=this,i=e.userId,n=e.username,s=this.ngbDialog.open(S,{centered:!0});s.componentInstance.userId=i,s.componentInstance.userName=n,s.result.then((function(e){e===c.g.SUCCESS&&t.fetchUsers(t.currentPage)}))}}]),e}(),C.\u0275fac=function(e){return new(e||C)(o.Pb(u.c),o.Pb(l.a),o.Pb(d.a))},C.\u0275cmp=o.Jb({type:C,selectors:[["app-manage-users"]],decls:23,vars:6,consts:[[1,"main"],[1,"container"],[1,"row"],[1,"col","card","shadow","p-0","mt-2"],["type","dark","height","0.5rem",3,"value","striped","animated",4,"ngIf"],[1,"table","table-striped"],[1,"d-flex"],[1,"col-1"],[1,"col-3"],[1,"col-2"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","p-2"],[3,"boundaryLinks","collectionSize","page","pageSize","pageChange"],["type","dark","height","0.5rem",3,"value","striped","animated"],[1,"shadow",3,"click"],[1,"ml-2","shadow",3,"click"]],template:function(e,t){1&e&&(o.Ub(0,"div",0),o.Ub(1,"h2"),o.Jc(2,"Manage Users"),o.Tb(),o.Ub(3,"div",1),o.Ub(4,"div",2),o.Ub(5,"div",3),o.Hc(6,k,1,3,"ngb-progressbar",4),o.Ub(7,"table",5),o.Ub(8,"thead"),o.Ub(9,"tr",6),o.Ub(10,"th",7),o.Jc(11,"S.NO"),o.Tb(),o.Ub(12,"th",8),o.Jc(13,"USER ID"),o.Tb(),o.Ub(14,"th",8),o.Jc(15,"ROLE"),o.Tb(),o.Ub(16,"th",8),o.Jc(17,"CREATED ON"),o.Tb(),o.Ub(18,"th",9),o.Jc(19,"ACTION"),o.Tb(),o.Tb(),o.Tb(),o.Hc(20,y,15,9,"tr",10),o.Tb(),o.Ub(21,"div",11),o.Ub(22,"ngb-pagination",12),o.gc("pageChange",(function(e){return t.currentPage=e}))("pageChange",(function(){return t.fetchUsers(t.currentPage)})),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&e&&(o.Bb(6),o.pc("ngIf",t.loading),o.Bb(14),o.pc("ngForOf",t.usersList),o.Bb(2),o.pc("boundaryLinks",!0)("collectionSize",t.collectionSize)("page",t.currentPage)("pageSize",t.pageSize))},directives:[n.m,n.l,u.e,u.f],pipes:[n.e],styles:["table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;font-size:14px;background-color:#97144d;border:1px solid #97144d}"]}),C),pathMatch:"full"}],w=((I=function e(){_classCallCheck(this,e)}).\u0275mod=o.Nb({type:I}),I.\u0275inj=o.Mb({factory:function(e){return new(e||I)},imports:[[r.e.forChild(E)],r.e]}),I),A=((B=function e(){_classCallCheck(this,e)}).\u0275mod=o.Nb({type:B}),B.\u0275inj=o.Mb({factory:function(e){return new(e||B)},imports:[[n.c,s.a,w]]}),B)}}]);