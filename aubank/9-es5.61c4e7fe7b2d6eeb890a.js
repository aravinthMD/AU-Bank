function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{JrXR:function(e,t,i){"use strict";i.r(t),i.d(t,"ManageUsersModule",(function(){return T}));var n=i("ofXK"),s=i("PCNd"),r=i("tyNb"),c=i("y1cd"),a=i("3Pt+"),o=i("fXoL"),u=i("1kSV"),l=i("kmKP"),b=i("SaRM"),d=i("mAmA");function h(e,t){if(1&e){var i=o.Xb();o.Wb(0,"label",18),o.Wb(1,"input",19),o.ic("change",(function(e){o.Dc(i);var n=t.$implicit;return o.mc().onChange(e,n)})),o.Vb(),o.Wb(2,"span",20),o.Mc(3),o.Vb(),o.Vb()}if(2&e){var n=t.$implicit;o.Cb(1),o.tc("id",n.title),o.Cb(2),o.Nc(n.title)}}function f(e,t){1&e&&o.Rb(0,"span",21)}function g(e,t){if(1&e&&(o.Wb(0,"span"),o.Mc(1),o.Vb()),2&e){var i=o.mc();o.Cb(1),o.Nc(i.updateButtonText)}}var v,p=((v=function(){function e(t,i,n,s,r){_classCallCheck(this,e),this.formBuilder=t,this.ngbActiveModal=i,this.userService=n,this.referenceService=s,this.toasterService=r,this.updateButtonText=c.b.UPDATE_BUTTON_TEXT,this.cancelButtonText=c.b.CANCEL_BUTTON_TEXT,this.loading=!1,this.accessControls=[],this.selectedMenuList=[],this.form=this.formBuilder.group({userId:["",[a.t.required]],accessMenus:[""]})}return _createClass(e,[{key:"ngOnInit",value:function(){this.accessControls=this.referenceService.getAvailableAccessControls(),this.fetchUserActivityByUserId()}},{key:"fetchUserActivityByUserId",value:function(){var e=this;this.loading=!0,this.userService.fetchUserActivityByUserId(this.userId).subscribe((function(t){var i=t.ProcessVariables,n=i.status,s=i.message,r=void 0===s?{}:s;n?(e.setForm(t),e.loading=!1):(e.loading=!1,e.toasterService.showError(r.value))}),(function(t){e.loading=!1,e.toasterService.showError(t)}))}},{key:"setForm",value:function(e){var t=e.ProcessVariables,i=t.activityList,n=t.roleName,s=t.userName;this.userDetail={activityList:i,roleName:n,userName:s},this.form.patchValue({userId:s}),this.validateAndSetAttributes()}},{key:"validateAndSetAttributes",value:function(){var e=this.userDetail.activityList,t=e.find((function(e){return 1===e})),i=e.find((function(e){return 2===e})),n=e.find((function(e){return 3===e})),s=e.find((function(e){return 4===e})),r=document.getElementById("checkboxes").getElementsByTagName("input");t&&(r[0].checked=!0,this.selectedMenuList.push(1)),i&&(r[1].checked=!0,this.selectedMenuList.push(2)),n&&(r[2].checked=!0,this.selectedMenuList.push(3)),s&&(r[3].checked=!0,this.selectedMenuList.push(4)),this.validate()}},{key:"onChange",value:function(e,t){if(e.target.checked)this.selectedMenuList.push(t.value);else{var i=this.selectedMenuList.findIndex((function(e){return e===t.value}));this.selectedMenuList.splice(i,1)}this.validate()}},{key:"validate",value:function(){var e=this.selectedMenuList.find((function(e){return 3===e})),t=this.selectedMenuList.find((function(e){return 4===e})),i=document.getElementById(c.d.MARKETING_MAKER),n=document.getElementById(c.d.MARKETING_CHECKER);e&&!t?n.setAttribute("disabled","true"):t&&!e?i.setAttribute("disabled","true"):(i.removeAttribute("disabled"),n.removeAttribute("disabled"))}},{key:"updateUser",value:function(){var e=this;this.loading=!0,this.userService.updateUser(this.userId,this.selectedMenuList,Number(this.userService.currentUserValue.userId)).subscribe((function(t){var i=t.ProcessVariables.status,n=t.ProcessVariables.message,s=void 0===n?{}:n;i?(e.toasterService.showSuccess(c.k.UPDATE_USER_SUCCESS),e.loading=!1,e.close(c.g.SUCCESS)):(e.loading=!1,e.toasterService.showError(s.value))}),(function(t){e.loading=!1,e.toasterService.showError(t)}))}},{key:"close",value:function(e){this.ngbActiveModal.close(e)}},{key:"fieldControls",get:function(){return this.form.controls}}]),e}()).\u0275fac=function(e){return new(e||v)(o.Qb(a.c),o.Qb(u.a),o.Qb(l.a),o.Qb(b.a),o.Qb(d.a))},v.\u0275cmp=o.Kb({type:v,selectors:[["app-user-dialog"]],inputs:{userId:"userId"},decls:25,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],[1,"text-message"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form",3,"formGroup"],[1,"form-group"],["for","userId"],[1,"input-group"],["type","text","formControlName","userId","id","userId","placeholder","Eg: USER0001","autocomplete","off","readonly","",1,"form-control"],["id","checkboxes",1,"row","d-flex"],["class","col-6 checkbox-inline container-checkbox",4,"ngFor","ngForOf"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-confirm","shadow",3,"disabled","click"],["class","spinner-border","style","width: 1rem; height: 1rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-danger","shadow",3,"click"],[1,"col-6","checkbox-inline","container-checkbox"],["type","checkbox","formControlName","accessMenus",1,"mx-1","checkbox-input",3,"id","change"],[1,"checkbox-title"],["aria-hidden","true",1,"spinner-border",2,"width","1rem","height","1rem"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"h4",1),o.Mc(2," Edit User - "),o.Wb(3,"span",2),o.Mc(4),o.Vb(),o.Vb(),o.Wb(5,"button",3),o.ic("click",(function(){return t.close()})),o.Wb(6,"span",4),o.Mc(7,"\xd7"),o.Vb(),o.Vb(),o.Vb(),o.Wb(8,"div",5),o.Wb(9,"form",6),o.Wb(10,"div",7),o.Wb(11,"label",8),o.Mc(12,"USER ID"),o.Vb(),o.Wb(13,"div",9),o.Rb(14,"input",10),o.Vb(),o.Vb(),o.Wb(15,"label"),o.Mc(16,"ACCESS CONTROLS"),o.Vb(),o.Wb(17,"div",11),o.Kc(18,h,4,2,"label",12),o.Vb(),o.Vb(),o.Vb(),o.Wb(19,"div",13),o.Wb(20,"button",14),o.ic("click",(function(){return t.updateUser()})),o.Kc(21,f,1,0,"span",15),o.Kc(22,g,2,1,"span",16),o.Vb(),o.Wb(23,"button",17),o.ic("click",(function(){return t.close()})),o.Mc(24),o.Vb(),o.Vb()),2&e&&(o.Cb(4),o.Nc(t.userDetail&&t.userDetail.userName),o.Cb(5),o.sc("formGroup",t.form),o.Cb(9),o.sc("ngForOf",t.accessControls),o.Cb(2),o.sc("disabled",t.form.invalid||0===t.selectedMenuList.length||t.loading),o.Cb(1),o.sc("ngIf",t.loading),o.Cb(1),o.sc("ngIf",!t.loading),o.Cb(2),o.Oc(" ",t.cancelButtonText," "))},directives:[a.v,a.n,a.h,a.b,a.m,a.f,n.l,n.m,a.a],styles:[".checkbox-title[_ngcontent-%COMP%]{font-size:16px;color:#212529}"]}),v);function m(e,t){1&e&&o.Rb(0,"span",11)}function C(e,t){if(1&e&&(o.Wb(0,"span"),o.Mc(1),o.Vb()),2&e){var i=o.mc();o.Cb(1),o.Nc(i.disableButtonText)}}var S,k=((S=function(){function e(t,i,n){_classCallCheck(this,e),this.ngbActiveModal=t,this.userService=i,this.toasterService=n,this.disableButtonText=c.b.DISABLE_BUTTON_TEXT,this.cancelButtonText=c.b.CANCEL_BUTTON_TEXT,this.loading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"disableUser",value:function(){var e=this;this.loading=!0,this.userService.disableUserById(this.userId,Number(this.userService.currentUserValue.userId)).subscribe((function(t){var i=t.ProcessVariables.status,n=t.ProcessVariables.message,s=void 0===n?{}:n;i?(e.toasterService.showSuccess(c.k.DISABLE_USER_SUCCESS),e.loading=!1,e.close(c.g.SUCCESS)):(e.loading=!1,e.toasterService.showError(s.value))}),(function(t){e.loading=!1,e.toasterService.showError(t)}))}},{key:"close",value:function(e){this.ngbActiveModal.close(e)}}]),e}()).\u0275fac=function(e){return new(e||S)(o.Qb(u.a),o.Qb(l.a),o.Qb(d.a))},S.\u0275cmp=o.Kb({type:S,selectors:[["app-disable-user-dialog"]],inputs:{userId:"userId",userName:"userName"},decls:15,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"text-message"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-confirm","shadow",3,"disabled","click"],["class","spinner-border","style","width: 1rem; height: 1rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-danger","shadow",3,"click"],["aria-hidden","true",1,"spinner-border",2,"width","1rem","height","1rem"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"h4",1),o.Mc(2," Do you want to disable user? "),o.Vb(),o.Wb(3,"button",2),o.ic("click",(function(){return t.close()})),o.Wb(4,"span",3),o.Mc(5,"\xd7"),o.Vb(),o.Vb(),o.Vb(),o.Wb(6,"div",4),o.Wb(7,"span",5),o.Mc(8),o.Vb(),o.Vb(),o.Wb(9,"div",6),o.Wb(10,"button",7),o.ic("click",(function(){return t.disableUser()})),o.Kc(11,m,1,0,"span",8),o.Kc(12,C,2,1,"span",9),o.Vb(),o.Wb(13,"button",10),o.ic("click",(function(){return t.close()})),o.Mc(14),o.Vb(),o.Vb()),2&e&&(o.Cb(8),o.Oc("Any information associated with account ",t.userName," will be deleted."),o.Cb(2),o.sc("disabled",t.loading),o.Cb(1),o.sc("ngIf",t.loading),o.Cb(1),o.sc("ngIf",!t.loading),o.Cb(2),o.Oc(" ",t.cancelButtonText," "))},directives:[n.m],styles:[""]}),S);function y(e,t){1&e&&o.Rb(0,"ngb-progressbar",14),2&e&&o.sc("value",100)("striped",!0)("animated",!0)}function V(e,t){if(1&e){var i=o.Xb();o.Wb(0,"tr",7),o.Wb(1,"td",8),o.Mc(2),o.Vb(),o.Wb(3,"td",9),o.Mc(4),o.Vb(),o.Wb(5,"td",9),o.Mc(6),o.Vb(),o.Wb(7,"td",9),o.Mc(8),o.nc(9,"date"),o.Vb(),o.Wb(10,"td",10),o.Wb(11,"button",15),o.ic("click",(function(){o.Dc(i);var e=t.$implicit;return o.mc().editUser(e)})),o.Mc(12),o.Vb(),o.Wb(13,"button",16),o.ic("click",(function(){o.Dc(i);var e=t.$implicit;return o.mc().disableUser(e)})),o.Mc(14),o.Vb(),o.Vb(),o.Vb()}if(2&e){var n=t.$implicit,s=t.index,r=o.mc();o.Cb(2),o.Nc(s+1),o.Cb(2),o.Nc(n.username),o.Cb(2),o.Nc(n.role),o.Cb(2),o.Nc(o.pc(9,6,n.created_at,"medium")),o.Cb(4),o.Oc(" ",r.editButtontext," "),o.Cb(2),o.Oc(" ",r.disableUserButtonText," ")}}var M,W,I,E=[{path:"",component:(M=function(){function e(t,i,n){_classCallCheck(this,e),this.ngbDialog=t,this.userService=i,this.toasterService=n,this.editButtontext=c.b.EDIT_BUTTON_TEXT,this.disableUserButtonText=c.b.DISABLE_BUTTON_TEXT,this.loading=!1,this.currentPage=1,this.pageSize=10}return _createClass(e,[{key:"ngOnInit",value:function(){this.fetchUsers(this.currentPage)}},{key:"fetchUsers",value:function(e){var t=this;window.scroll(0,0),this.loading=!0,this.userService.fetchUsers(e).subscribe((function(e){var i=e.ProcessVariables,n=i.status,s=i.message,r=void 0===s?{}:s;if(n){var c=e.ProcessVariables,a=c.usersList,o=c.totalCount;t.collectionSize=o,t.usersList=a,t.loading=!1}else t.loading=!1,t.toasterService.showError(r.value)}),(function(e){t.loading=!1,t.toasterService.showError(e)}))}},{key:"editUser",value:function(e){var t=this,i=e.userId,n=this.ngbDialog.open(p,{centered:!0});n.componentInstance.userId=i,n.result.then((function(e){e===c.g.SUCCESS&&t.fetchUsers(t.currentPage)}))}},{key:"disableUser",value:function(e){var t=this,i=e.userId,n=e.username,s=this.ngbDialog.open(k,{centered:!0});s.componentInstance.userId=i,s.componentInstance.userName=n,s.result.then((function(e){e===c.g.SUCCESS&&t.fetchUsers(t.currentPage)}))}}]),e}(),M.\u0275fac=function(e){return new(e||M)(o.Qb(u.c),o.Qb(l.a),o.Qb(d.a))},M.\u0275cmp=o.Kb({type:M,selectors:[["app-manage-users"]],decls:23,vars:6,consts:[[1,"main"],[1,"p-4"],[1,"container"],[1,"row"],[1,"col","card","shadow","p-0","mt-2"],["type","dark","height","0.5rem",3,"value","striped","animated",4,"ngIf"],[1,"table","table-striped"],[1,"d-flex"],[1,"col-1"],[1,"col-3"],[1,"col-2"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","p-2"],[3,"boundaryLinks","collectionSize","page","pageSize","pageChange"],["type","dark","height","0.5rem",3,"value","striped","animated"],[1,"shadow",3,"click"],[1,"ml-2","shadow",3,"click"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"h2",1),o.Mc(2,"Manage Users"),o.Vb(),o.Wb(3,"div",2),o.Wb(4,"div",3),o.Wb(5,"div",4),o.Kc(6,y,1,3,"ngb-progressbar",5),o.Wb(7,"table",6),o.Wb(8,"thead"),o.Wb(9,"tr",7),o.Wb(10,"th",8),o.Mc(11,"S.NO"),o.Vb(),o.Wb(12,"th",9),o.Mc(13,"USER ID"),o.Vb(),o.Wb(14,"th",9),o.Mc(15,"ROLE"),o.Vb(),o.Wb(16,"th",9),o.Mc(17,"CREATED ON"),o.Vb(),o.Wb(18,"th",10),o.Mc(19,"ACTION"),o.Vb(),o.Vb(),o.Vb(),o.Kc(20,V,15,9,"tr",11),o.Vb(),o.Wb(21,"div",12),o.Wb(22,"ngb-pagination",13),o.ic("pageChange",(function(e){return t.currentPage=e}))("pageChange",(function(){return t.fetchUsers(t.currentPage)})),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&e&&(o.Cb(6),o.sc("ngIf",t.loading),o.Cb(14),o.sc("ngForOf",t.usersList),o.Cb(2),o.sc("boundaryLinks",!0)("collectionSize",t.collectionSize)("page",t.currentPage)("pageSize",t.pageSize))},directives:[n.m,n.l,u.e,u.f],pipes:[n.e],styles:["table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;font-size:14px;background-color:#5b2e8f;border:1px solid #5b2e8f}"]}),M),pathMatch:"full"}],U=((I=function e(){_classCallCheck(this,e)}).\u0275mod=o.Ob({type:I}),I.\u0275inj=o.Nb({factory:function(e){return new(e||I)},imports:[[r.e.forChild(E)],r.e]}),I),T=((W=function e(){_classCallCheck(this,e)}).\u0275mod=o.Ob({type:W}),W.\u0275inj=o.Nb({factory:function(e){return new(e||W)},imports:[[n.c,s.a,U]]}),W)}}]);