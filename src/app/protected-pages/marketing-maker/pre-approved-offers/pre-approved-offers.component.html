<div class="main text-center mx-auto">
  <div class="container">
    <form [formGroup]="form">
      <div class="form-group">
        <label>TemplateId</label><br>
        <mat-form-field floatLabel = "never" class="example-full-width">
          <mat-select placeholder = "select the id" formControlName="templateId" (selectionChange) = "onTemplateIdChange()">
            <mat-option>None</mat-option>
            <mat-option *ngFor="let data of templateDropDown" [value]="data">{{data.templateId}}-{{data.templateName}}</mat-option>
          </mat-select>
        </mat-form-field>
        </div>

        <div *ngIf = "showTemplateMessageFlag" class="form-group">
          <label for="template">Template</label>
          <textarea [readonly] = "true"
            class="form-control"
            formControlName="template"
            id="template"
            rows="3"
          ></textarea>
        </div>

      <div class="form-group">
        <label>TimeZones</label><br>
        <mat-form-field class="example-full-width" floatLabel = "never">
          <input type="text"
                 placeholder="select time zones"
                 aria-label="Number"
                 matInput
                 [formControl]="form.controls['timeZone']"
                 formControlName = "timeZone"
                 [matAutocomplete]="auto" class="form-control">
          <mat-autocomplete #auto="matAutocomplete" [displayWith] = "displayFn.bind(this)">
            <mat-option *ngFor="let timeZone of filteredOptions | async " [value]="timeZone.utc[0]">
              {{timeZone.text}}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
      </div>

      <div class="form-group">
        <div class="country-code">
        <label>CountryCode</label>
        <ng-multiselect-dropdown formControlName="countryCodes" 
        placeholder="select country code"
        [settings]="dropdownSettings"
        [data]="countryCodeList"
        >
        <mat-icon matSuffix>search</mat-icon>
        </ng-multiselect-dropdown>
      </div>
      </div>
      <div class="form-group">
        <label>Campaign Start Date</label>
        <div class="input-group">
          <input
            class="form-control bg-search btn-outline-secondary"
            placeholder="Campaign Start Date"
            formControlName="campaignStartDate"
            name="fromDate"
            (dateSelect)="onFromDateChange($event)"
            [maxDate]="fromMaxDate"
            [minDate]="fromMinDate"
            ngbDatepicker
            readonly
            #fromDate="ngbDatepicker"
          />
          <div class="input-group-append">
            <button
              class="btn btn-outline-secondary"
              (click)="fromDate.toggle()"
              type="button"
            >
              <i class="fa fa-calendar-check-o"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Trigger Time</label>
        <ngb-timepicker
          formControlName="triggerTime"
          [meridian]="false"
          [spinners]="false"
        ></ngb-timepicker>
         <div class = "alert alert-danger" *ngIf = "form.get('triggerTime').invalid && (form.get('triggerTime').dirty || form.get('triggerTime').touched)">
           <small *ngIf = "form.get('triggerTime').hasError('triggerTimeError') && form.get('triggerTime').errors.triggerTimeError" class="medium form-text text-danger">Time sholud not be less than current time</small>
         </div>
      </div>
      <div class="form-group">
        <label>Campaign End Date</label>
        <div class="input-group">
          <input
            class="form-control bg-search btn-outline-secondary"
            placeholder="Campaign End Date"
            name="endDate"
            formControlName="campaignEndDate"
            (dateSelect)="onToDateChange($event)"
            [maxDate]="toMaxDate"
            [minDate]="toMinDate"
            ngbDatepicker
            readonly
            #endDate="ngbDatepicker"
          />
          <div class="input-group-append">
            <button
              class="btn btn-outline-secondary"
              (click)="endDate.toggle()"
              type="button"
            >
              <i class="fa fa-calendar-check-o"></i>
            </button>
          </div>
        </div>
      </div>
      <button
        type="button"
        [disabled]="form.invalid || loading"
        class="btn submit-btn shadow"
        (click)="onSubmit()"
      >
        <span
          *ngIf="loading"
          class="spinner-border"
          style="width: 2rem; height: 2rem;"
          aria-hidden="true"
        >
        </span>
        <span *ngIf="!loading"> {{ submitButtonText }}</span>
      </button>
    </form>
  </div>
</div>
