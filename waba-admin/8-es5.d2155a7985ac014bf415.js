function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Q6l2:function(e,t,o){"use strict";o.r(t),o.d(t,"ConfigureTriggerTimeModule",(function(){return I}));var i,r=o("ofXK"),n=o("3Pt+"),c=o("tyNb"),a=o("y1cd"),s=o("+0xr"),l=o("M9IT"),u=o("0IaG"),m=o("fXoL"),b=o("kmKP"),d=o("mAmA"),f=o("1kSV"),h=((i=function(){function e(t,o,i,r,n){_classCallCheck(this,e),this.formBuilder=t,this.data=o,this.userService=i,this.toasterService=r,this.dialogRef=n,this.forms=this.formBuilder.group({FromTime:[],ToTime:[]}),this.data&&(this.blockedFrom=this.data.blockedFrom,this.blockedTo=this.data.blockedTo,this.timeZoneText=this.data.text,this.timeZoneId=this.data.id),this.configurable(this.blockedFrom,this.blockedTo)}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"configurable",value:function(e,t){var o=e.split(":"),i=Number(o[0]),r=Number(o[1]),n=t.split(":"),c=Number(n[0]),a=Number(n[1]);this.forms.controls.FromTime.setValue({hour:i,minute:r}),this.forms.controls.ToTime.setValue({hour:c,minute:a})}},{key:"OnEdit",value:function(){var e=this,t=this.forms.controls,o=t.FromTime.value,i=t.ToTime.value;this.userService.updateTimeZonesBasedBlockedTime(this.timeZoneId,this.userService.currentUserValue.userId,"".concat(o.hour,":").concat(o.minute,":00"),"".concat(i.hour,":").concat(i.minute,":00")).subscribe((function(t){t&&(console.log(t),t.ProcessVariables.status?(e.updatedFlag=!0,e.toasterService.showSuccess(a.j.UPDATE_BLOCK_TIME_SUCCESS),e.updatedFlag=!0,e.dialogRef.close(e.updatedFlag)):e.toasterService.showError(a.j.UPDATE_BLOCK_TIME_FAILURE))}))}}]),e}()).\u0275fac=function(e){return new(e||i)(m.Qb(n.c),m.Qb(u.a),m.Qb(b.a),m.Qb(d.a),m.Qb(u.g))},i.\u0275cmp=m.Kb({type:i,selectors:[["app-update-trigger-time-pop-up"]],decls:27,vars:3,consts:[[1,"header","p-2"],[1,"mt-2"],[1,"pb-2"],[3,"formGroup"],[1,"col-12","row","d-flex","p-0"],[1,"col-6"],[1,"form-group","pl-4"],["for","fromTimePicker"],["id","fromTimePicker","formControlName","FromTime"],[1,"form-group"],["for","toTimePicker"],["id","toTimePicker","formControlName","ToTime"],[1,"row","col-12","d-flex","justify-content-center"],[1,"btn","submit-btn","shadow","header","text-white","mr-2",3,"disabled","click"],["mat-dialog-close","",1,"btn","submit-btn","shadow","header","text-white"]],template:function(e,t){1&e&&(m.Wb(0,"div",0),m.Wb(1,"h3"),m.Mc(2,"Schedule Block Time"),m.Vb(),m.Vb(),m.Wb(3,"h4",1),m.Mc(4,"Time Zone "),m.Vb(),m.Wb(5,"span",2),m.Mc(6),m.Vb(),m.Wb(7,"form",3),m.Wb(8,"div",4),m.Wb(9,"div",5),m.Wb(10,"div",6),m.Wb(11,"label",7),m.Wb(12,"b"),m.Mc(13,"From Time"),m.Vb(),m.Vb(),m.Rb(14,"ngb-timepicker",8),m.Vb(),m.Vb(),m.Wb(15,"div",5),m.Wb(16,"div",9),m.Wb(17,"label",10),m.Wb(18,"b"),m.Mc(19,"To Time"),m.Vb(),m.Vb(),m.Rb(20,"ngb-timepicker",11),m.Vb(),m.Vb(),m.Vb(),m.Wb(21,"div"),m.Wb(22,"div",12),m.Wb(23,"button",13),m.ic("click",(function(){return t.OnEdit()})),m.Mc(24,"Schedule"),m.Vb(),m.Wb(25,"button",14),m.Mc(26,"Close"),m.Vb(),m.Vb(),m.Vb(),m.Vb()),2&e&&(m.Cb(6),m.Nc(t.timeZoneText),m.Cb(1),m.sc("formGroup",t.forms),m.Cb(16),m.sc("disabled",t.forms.invalid||!t.forms.dirty))},directives:[n.w,n.n,n.h,f.k,n.m,n.f,u.d],styles:[".header[_ngcontent-%COMP%]{background-color:#97144d}h3[_ngcontent-%COMP%]{color:#fff}.mat-dialog-container[_ngcontent-%COMP%]{width:70%!important;height:70%!important}"]}),i),g=o("kmnG"),p=o("qFsG");function T(e,t){1&e&&(m.Wb(0,"th",16),m.Mc(1," S.NO "),m.Vb())}function v(e,t){if(1&e&&(m.Wb(0,"td",17),m.Mc(1),m.Vb()),2&e){var o=t.index;m.Cb(1),m.Oc(" ",o+1," ")}}function C(e,t){1&e&&(m.Wb(0,"th",16),m.Mc(1," Time Zones "),m.Vb())}function k(e,t){if(1&e&&(m.Wb(0,"td",17),m.Mc(1),m.Vb()),2&e){var o=t.$implicit;m.Cb(1),m.Oc(" ",o.text," ")}}function V(e,t){1&e&&(m.Wb(0,"th",16),m.Mc(1," From Blocked Time "),m.Vb())}function O(e,t){if(1&e&&(m.Wb(0,"td",17),m.Mc(1),m.Vb()),2&e){var o=t.$implicit;m.Cb(1),m.Oc(" ",o.blockedFrom," ")}}function M(e,t){1&e&&(m.Wb(0,"th",16),m.Mc(1," To Blocked Time "),m.Vb())}function _(e,t){if(1&e&&(m.Wb(0,"td",17),m.Mc(1),m.Vb()),2&e){var o=t.$implicit;m.Cb(1),m.Oc(" ",o.blockedTo," ")}}function w(e,t){1&e&&(m.Wb(0,"th",16),m.Mc(1," Action "),m.Vb())}function P(e,t){if(1&e){var o=m.Xb();m.Wb(0,"td",17),m.Wb(1,"button",18),m.ic("click",(function(){m.Dc(o);var e=t.$implicit;return m.mc().OpenDialog(e)})),m.Mc(2,"Edit"),m.Vb(),m.Vb()}}function S(e,t){1&e&&m.Rb(0,"tr",19)}function W(e,t){1&e&&m.Rb(0,"tr",20)}var y,B,F,E=function(){return[10,20]},D=[{path:"",component:(y=function(){function e(t,o,i,r){_classCallCheck(this,e),this.formBuilder=t,this.userService=o,this.toasterService=i,this.dialog=r,this.fromTime={hour:13,minute:30},this.toTime={hour:13,minute:30},this.loading=!1,this.timeZonesList=[],this.dataSource=new s.k,this.forms=this.formBuilder.group({FromTime:[null],ToTime:[null]}),this.tableHeaders=["S.NO","TimeZones","FromBlockedTime","ToBlockedTime","Action"]}return _createClass(e,[{key:"ngOnInit",value:function(){this.fetchTimeZonesBasedBlockedTimes()}},{key:"ngAfterViewInit",value:function(){}},{key:"OnSubmit",value:function(){var e=this.forms.controls,t=e.FromTime.value,o=e.ToTime.value;this.userService.updateBlockTriggerTime("".concat(t.hour,":").concat(t.minute,":00"),"".concat(o.hour,":").concat(o.minute,":00"),Number(this.userService.currentUserValue.userId),"").subscribe((function(e){console.log()}))}},{key:"OnEdit",value:function(){var e=this,t=this.forms.controls,o=t.FromTime.value,i=t.ToTime.value,r=this.userService.currentUserValue.userId,n="".concat(o.hour,":").concat(o.minute,":00"),c="".concat(i.hour,":").concat(i.minute,":00");this.loading=!0,this.userService.updateBlockTriggerTime(n,c,Number(r),this.id).subscribe((function(t){console.log(t);var o=t.ProcessVariables.status;t.ProcessVariables.message,o?(e.forms.reset(),e.loading=!1,e.toasterService.showSuccess(a.j.UPDATE_BLOCK_TIME_SUCCESS),e.getBlockTriggerTime()):(e.toasterService.showError(a.j.UPDATE_BLOCK_TIME_FAILURE),e.loading=!1)}),(function(t){e.loading=!1,e.toasterService.showError(t),console.log(t)}))}},{key:"getBlockTriggerTime",value:function(){var e=this;this.userService.getTriggerTimeBlock("1").subscribe((function(t){t.ProcessVariables.message,console.log(t);var o=t.ProcessVariables,i=o.blockedBy,r=o.blockedFrom,n=o.blockedTo,c=o.id;e.blockedBy=i,e.blockedFrom=r,e.blcokedTo=n,e.id=c,e.configurable(r,n)}))}},{key:"configurable",value:function(e,t){var o=e.split(":"),i=Number(o[0]),r=Number(o[1]),n=t.split(":"),c=Number(n[0]),a=Number(n[1]);this.forms.controls.FromTime.setValue({hour:i,minute:r}),this.forms.controls.ToTime.setValue({hour:c,minute:a})}},{key:"fetchTimeZonesBasedBlockedTimes",value:function(){var e=this;this.userService.fetchTimeZonesBasedBlockedTimes().subscribe((function(t){if(t){console.log(t);var o=t.ProcessVariables,i=o.status,r=o.timeZones;console.log(r),i?r&&(e.dataSource=new s.k(r),e.dataSource.paginator=e.paginator):e.toasterService.showError(a.j.DROP_DOWN_FAILURE)}}))}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.trim().toLowerCase()}},{key:"OpenDialog",value:function(e){var t=this;this.dialog.open(h,{width:"30%",height:"50%",data:e}).afterClosed().subscribe((function(e){e&&t.fetchTimeZonesBasedBlockedTimes()}))}}]),e}(),y.\u0275fac=function(e){return new(e||y)(m.Qb(n.c),m.Qb(b.a),m.Qb(d.a),m.Qb(u.b))},y.\u0275cmp=m.Kb({type:y,selectors:[["app-configure-trigger-time"]],viewQuery:function(e,t){var o;1&e&&m.Ic(l.a,!0),2&e&&m.zc(o=m.jc())&&(t.paginator=o.first)},decls:26,vars:5,consts:[[1,"col-md-10","main"],[1,"header"],[1,"col-md-12"],["matInput","","placeholder","filter",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","S.NO"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","TimeZones"],["matColumnDef","FromBlockedTime"],["matColumnDef","ToBlockedTime"],["matColumnDef","Action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[3,"click"],["mat-header-row",""],["mat-row","",1,"example-element-row"]],template:function(e,t){1&e&&(m.Wb(0,"div",0),m.Wb(1,"h2",1),m.Mc(2,"Configure Block Time"),m.Vb(),m.Wb(3,"div",2),m.Wb(4,"mat-form-field"),m.Wb(5,"input",3),m.ic("keyup",(function(e){return t.applyFilter(e.target.value)})),m.Vb(),m.Vb(),m.Wb(6,"div",4),m.Wb(7,"table",5),m.Ub(8,6),m.Kc(9,T,2,0,"th",7),m.Kc(10,v,2,1,"td",8),m.Tb(),m.Ub(11,9),m.Kc(12,C,2,0,"th",7),m.Kc(13,k,2,1,"td",8),m.Tb(),m.Ub(14,10),m.Kc(15,V,2,0,"th",7),m.Kc(16,O,2,1,"td",8),m.Tb(),m.Ub(17,11),m.Kc(18,M,2,0,"th",7),m.Kc(19,_,2,1,"td",8),m.Tb(),m.Ub(20,12),m.Kc(21,w,2,0,"th",7),m.Kc(22,P,3,0,"td",8),m.Tb(),m.Kc(23,S,1,0,"tr",13),m.Kc(24,W,1,0,"tr",14),m.Vb(),m.Rb(25,"mat-paginator",15),m.Vb(),m.Vb(),m.Vb()),2&e&&(m.Cb(7),m.sc("dataSource",t.dataSource),m.Cb(16),m.sc("matHeaderRowDef",t.tableHeaders),m.Cb(1),m.sc("matRowDefColumns",t.tableHeaders),m.Cb(1),m.sc("pageSizeOptions",m.vc(4,E)))},directives:[g.b,p.a,s.j,s.c,s.e,s.b,s.g,s.i,l.a,s.d,s.a,s.f,s.h],styles:["button[_ngcontent-%COMP%]{color:#fff;border-radius:3px}.card-header[_ngcontent-%COMP%]{background-color:#97144d;color:#fff;padding:.75rem!important;border-top-left-radius:unset;border-top-right-radius:unset}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;color:#97144d}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle;color:#97144d!important;font-size:15px}table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;font-size:14px;background-color:#97144d;border:1px solid #97144d}table[_ngcontent-%COMP%]{width:100%;margin-bottom:0!important}.header[_ngcontent-%COMP%]{padding-left:18px;padding-bottom:24px}"]}),y),pathMatch:"full"}],N=((B=function e(){_classCallCheck(this,e)}).\u0275mod=m.Ob({type:B}),B.\u0275inj=m.Nb({factory:function(e){return new(e||B)},imports:[[c.e.forChild(D)],c.e]}),B),x=o("PCNd"),K=o("hctd"),I=((F=function e(){_classCallCheck(this,e)}).\u0275mod=m.Ob({type:F}),F.\u0275inj=m.Nb({factory:function(e){return new(e||F)},imports:[[r.c,n.i,N,f.d,x.a,K.a]]}),F)}}]);