(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{sjZA:function(e,t,n){"use strict";n.r(t),n.d(t,"MarketingMakerModule",(function(){return X}));var o=n("ofXK"),i=n("tyNb"),a=n("fXoL"),r=n("1kSV"),c=n("3Pt+"),l=n("y1cd"),s=n("SaRM"),b=n("kmKP"),d=n("mAmA");function p(e,t){1&e&&a.Qb(0,"ngb-progressbar",23),2&e&&a.pc("value",100)("striped",!0)("animated",!0)}function u(e,t){if(1&e&&(a.Ub(0,"option",24),a.Ic(1),a.Tb()),2&e){const e=t.$implicit;a.pc("value",e.value),a.Bb(1),a.Jc(e.name)}}function m(e,t){if(1&e&&(a.Ub(0,"th",25),a.Ic(1),a.Tb()),2&e){const e=t.$implicit;a.Bb(1),a.Jc(e)}}function g(e,t){if(1&e&&(a.Ub(0,"span"),a.Qb(1,"br"),a.Ic(2),a.kc(3,"date"),a.Tb()),2&e){const e=a.jc().$implicit;a.Bb(2),a.Kc("END DATE - ",a.mc(3,1,e.endDate,"yyyy-MM-dd"),"")}}function f(e,t){1&e&&(a.Ub(0,"span",30),a.Ic(1,"SUBMITTED"),a.Tb())}function h(e,t){1&e&&(a.Ub(0,"span",31),a.Ic(1,"APPROVED"),a.Tb())}function T(e,t){1&e&&(a.Ub(0,"span",32),a.Ic(1,"REJECTED"),a.Tb())}function U(e,t){if(1&e&&(a.Ub(0,"span"),a.Ic(1),a.Tb()),2&e){const e=a.jc().$implicit;a.Bb(1),a.Jc(e.reason)}}function v(e,t){1&e&&(a.Ub(0,"span"),a.Ic(1,"--"),a.Tb())}function D(e,t){if(1&e&&(a.Ub(0,"tr"),a.Ub(1,"td"),a.Ub(2,"a"),a.Ic(3),a.Tb(),a.Tb(),a.Ub(4,"td"),a.Ic(5),a.Tb(),a.Ub(6,"td"),a.Ub(7,"span"),a.Ic(8),a.kc(9,"date"),a.Tb(),a.Qb(10,"br"),a.Ub(11,"span"),a.Ic(12),a.Tb(),a.Gc(13,g,4,4,"span",26),a.Tb(),a.Ub(14,"td"),a.Gc(15,f,2,0,"span",27),a.Gc(16,h,2,0,"span",28),a.Gc(17,T,2,0,"span",29),a.Qb(18,"br"),a.Tb(),a.Ub(19,"td"),a.Gc(20,U,2,1,"span",26),a.Gc(21,v,2,0,"span",26),a.Tb(),a.Tb()),2&e){const e=t.$implicit;a.Bb(3),a.Jc(e.id),a.Bb(2),a.Kc(" ",e.template," "),a.Bb(3),a.Kc("START DATE - ",a.mc(9,10,e.startDate,"yyyy-MM-dd"),""),a.Bb(4),a.Kc("TRIGGER TIME - ",e.triggerTime,""),a.Bb(1),a.pc("ngIf",e.endDate),a.Bb(2),a.pc("ngIf","10"===e.status),a.Bb(1),a.pc("ngIf","30"===e.status),a.Bb(1),a.pc("ngIf","20"===e.status),a.Bb(3),a.pc("ngIf","20"===e.status),a.Bb(1),a.pc("ngIf","20"!==e.status)}}let y=(()=>{class e{constructor(e,t,n,o){this.formBuilder=e,this.referenceService=t,this.userService=n,this.toasterService=o,this.loading=!1,this.currentPage=1,this.pageSize=10,this.templates=[],this.isFilterValid=!1,this.filterOptions=[{name:"ALL",value:"40"},{name:"SUBMITTED",value:"10"},{name:"APPROVED",value:"30"},{name:"REJECTED",value:"20"}],this.tableHeaders=["Template Id","Template","Schedule","Status","Reason"],this.form=this.formBuilder.group({fromDate:[null,c.s.required],toDate:[null,c.s.required],filterType:[l.i.ALL,c.s.required]})}ngOnInit(){this.setValidators(),this.fetchTemplates()}setValidators(){const{minDate:e,maxDate:t}=this.referenceService.getDefaultDateValidators();this.fromMinDate=e,this.fromMaxDate=t,this.toMinDate=e,this.toMaxDate=t}onFromDateChange(e){const{year:t,month:n,day:o}=e;this.toMinDate={year:t,month:n,day:o},this.validate()}onToDateChange(e){const{year:t,month:n,day:o}=e;this.fromMaxDate={year:t,month:n,day:o},this.validate()}onFilterTypeChange(e){this.validate()}validate(){this.form.valid?(this.isFilterValid=!0,this.fetchFilteredTemplates()):this.isFilterValid=!1}onPageChanged(e){this.currentPage=e,this.isFilterValid?this.fetchFilteredTemplates():this.fetchTemplates()}fetchFilteredTemplates(){this.templates=null,window.scroll(0,0),this.loading=!0;const e=this.form.controls,t=e.fromDate.value,n=e.toDate.value,o=e.filterType.value;this.userService.fetchTemplates(this.currentPage,`${t.year}-${t.month}-${t.day}`,`${n.year}-${n.month}-${n.day}`,o===l.i.ALL?"":o).subscribe(e=>{const{ProcessVariables:{status:t},ProcessVariables:{message:n={}}}=e;t?(this.templates=e.ProcessVariables.templateList,this.collectionSize=e.ProcessVariables.totalCount,this.loading=!1):(this.loading=!1,this.toasterService.showError(n.value))},e=>{this.loading=!1,this.toasterService.showError(e)})}fetchTemplates(){this.templates=null,window.scroll(0,0),this.loading=!0,this.userService.fetchTemplates(this.currentPage,"","","").subscribe(e=>{const{ProcessVariables:{status:t},ProcessVariables:{message:n={}}}=e;t?(this.templates=e.ProcessVariables.templateList,this.collectionSize=e.ProcessVariables.totalCount,this.loading=!1):(this.loading=!1,this.toasterService.showError(n.value))},e=>{this.loading=!1,this.toasterService.showError(e)})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(c.c),a.Pb(s.a),a.Pb(b.a),a.Pb(d.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-dashboard"]],decls:32,vars:13,consts:[["type","dark","height","0.5rem",3,"value","striped","animated",4,"ngIf"],[1,"row","p-3"],[1,"col-6"],[3,"formGroup"],[1,"form-row"],[1,"col"],[1,"input-group"],["placeholder","From Date","name","fromDate","formControlName","fromDate","ngbDatepicker","","readonly","",1,"form-control","bg-search","btn-outline-secondary",3,"maxDate","minDate","dateSelect"],["fromDate","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar-check-o"],["placeholder","To Date","name","toDate","formControlName","toDate","ngbDatepicker","","readonly","",1,"form-control","bg-search","btn-outline-secondary",3,"maxDate","minDate","dateSelect"],["toDate","ngbDatepicker"],["formControlName","filterType","title","Filter Type","id","role",1,"custom-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive"],[1,"table"],[1,"thead-light"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","p-2"],[3,"boundaryLinks","collectionSize","page","pageSize","pageChange"],["type","dark","height","0.5rem",3,"value","striped","animated"],[3,"value"],["scope","col"],[4,"ngIf"],["class","p-1 bg-maroon rounded-pill",4,"ngIf"],["class","p-1 approved-btn rounded-pill",4,"ngIf"],["class","p-1 rejected-btn rounded-pill",4,"ngIf"],[1,"p-1","bg-maroon","rounded-pill"],[1,"p-1","approved-btn","rounded-pill"],[1,"p-1","rejected-btn","rounded-pill"]],template:function(e,t){if(1&e){const e=a.Vb();a.Gc(0,p,1,3,"ngb-progressbar",0),a.Ub(1,"div",1),a.Qb(2,"div",2),a.Ub(3,"div",2),a.Ub(4,"form",3),a.Ub(5,"div",4),a.Ub(6,"div",5),a.Ub(7,"div",6),a.Ub(8,"input",7,8),a.gc("dateSelect",(function(e){return t.onFromDateChange(e)})),a.Tb(),a.Ub(10,"div",9),a.Ub(11,"button",10),a.gc("click",(function(){return a.zc(e),a.xc(9).toggle()})),a.Qb(12,"i",11),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(13,"div",5),a.Ub(14,"div",6),a.Ub(15,"input",12,13),a.gc("dateSelect",(function(e){return t.onToDateChange(e)})),a.Tb(),a.Ub(17,"div",9),a.Ub(18,"button",10),a.gc("click",(function(){return a.zc(e),a.xc(16).toggle()})),a.Qb(19,"i",11),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(20,"div",5),a.Ub(21,"select",14),a.gc("change",(function(e){return t.onFilterTypeChange(e)})),a.Gc(22,u,2,2,"option",15),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(23,"div",16),a.Ub(24,"table",17),a.Ub(25,"thead",18),a.Ub(26,"tr"),a.Gc(27,m,2,1,"th",19),a.Tb(),a.Tb(),a.Ub(28,"tbody"),a.Gc(29,D,22,13,"tr",20),a.Tb(),a.Tb(),a.Ub(30,"div",21),a.Ub(31,"ngb-pagination",22),a.gc("pageChange",(function(e){return t.currentPage=e}))("pageChange",(function(){return t.onPageChanged(t.currentPage)})),a.Tb(),a.Tb(),a.Tb()}2&e&&(a.pc("ngIf",t.loading),a.Bb(4),a.pc("formGroup",t.form),a.Bb(4),a.pc("maxDate",t.fromMaxDate)("minDate",t.fromMinDate),a.Bb(7),a.pc("maxDate",t.toMaxDate)("minDate",t.toMinDate),a.Bb(7),a.pc("ngForOf",t.filterOptions),a.Bb(5),a.pc("ngForOf",t.tableHeaders),a.Bb(2),a.pc("ngForOf",t.templates),a.Bb(2),a.pc("boundaryLinks",!0)("collectionSize",t.collectionSize)("page",t.currentPage)("pageSize",t.pageSize))},directives:[o.m,c.u,c.m,c.g,c.b,r.b,c.l,c.e,c.r,o.l,r.e,r.f,c.o,c.t],pipes:[o.e],styles:["tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;color:#97144d}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle;color:#97144d!important}table[_ngcontent-%COMP%]{margin-bottom:0!important}.bg-search[_ngcontent-%COMP%]{background-color:#fff!important;color:#6c757d}.action-btn[_ngcontent-%COMP%]{background-color:#97144d;border:1px solid #97144d}.action-btn[_ngcontent-%COMP%], .rejected-btn[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-transform:uppercase}.rejected-btn[_ngcontent-%COMP%]{background-color:#8b0000;border:1px solid #8b0000}.approved-btn[_ngcontent-%COMP%]{color:#fff;background-color:#006400;border:1px solid #006400;font-size:12px;text-transform:uppercase}"]}),e})();const x=["labelImport"];function C(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",23),a.gc("click",(function(){return a.zc(e),a.jc().cancelFileUpload()})),a.Ic(1,"X"),a.Tb()}}function I(e,t){1&e&&a.Qb(0,"span",24)}function S(e,t){if(1&e&&(a.Ub(0,"span"),a.Ic(1),a.Tb()),2&e){const e=a.jc();a.Bb(1),a.Kc(" ",e.submitButtonText,"")}}let P=(()=>{class e{constructor(e,t,n){this.formBuilder=e,this.userService=t,this.toasterService=n,this.submitButtonText=l.b.SUBMIT_BUTTON_TEXT,this.loading=!1,this.defaultTime={hour:12,minute:0},this.form=this.formBuilder.group({template:[null,c.s.required],campaignStartDate:[new Date,c.s.required],campaignEndDate:[null,c.s.required],triggerTime:[this.defaultTime,c.s.required],importFile:[null]})}ngOnInit(){this.setValidators()}setValidators(){const e=new Date;console.log("Date"+e.getDate()+" "+e.getFullYear()+" "+e.getMonth()),this.fromMinDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()},this.toMinDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}onFromDateChange(e){const{year:t,month:n,day:o}=e;this.toMinDate={year:t,month:n,day:o}}onToDateChange(e){const{year:t,month:n,day:o}=e;this.fromMaxDate={year:t,month:n,day:o}}onSubmit(){if(this.form.valid){this.loading=!0;const e=this.form.controls,t=e.campaignStartDate.value,n=e.triggerTime.value,o=e.campaignEndDate.value;this.fileUploadFlag=!!e.importFile.value,this.userService.createMessageTemplate(e.template.value,`${t.year}-${t.month}-${t.day}`,`${o.year}-${o.month}-${o.day}`,`${n.hour}:${n.minute}:00`,String(this.userService.currentUserValue.userId),this.fileUploadFlag,this.documentUploadId).subscribe(e=>{const{ProcessVariables:{status:t},ProcessVariables:{message:n={}}}=e;t?(this.toasterService.showSuccess(l.j.CREATE_MESSAGE_TEMPLATE_SUCCESS),this.form.reset(),this.labelImport.nativeElement.innerText=l.j.LABLE_MESSAGE,this.documentUploadId=null,this.loading=!1,this.fileToUpload=null):(this.loading=!1,this.toasterService.showError(n.value))},e=>{this.loading=!1,this.toasterService.showError(e)})}}onFileChange(e){this.labelImport.nativeElement.innerText=Array.from(e).map(e=>e.name).join(", "),this.fileToUpload=e.item(0),console.log("FiletoUpload"+this.fileToUpload);const t=String(this.userService.currentUserValue.userId),n=Object.defineProperty(this.fileToUpload,"name",{writable:!0,value:this.fileToUpload.name});n.name=t+"-"+(new Date).getTime()+"-"+n.name,console.log(n),this.uploadToAppiyoDrive(n)}cancelFileUpload(){this.form.controls.importFile.reset(),this.fileToUpload=null,this.fileUploadFlag=!1,this.documentUploadId=null,this.labelImport.nativeElement.innerText=l.j.LABLE_MESSAGE}getFileSize(e){if(e/1024/1024>2)return null;{let t,n=!1;return(e/=1024)>=1024&&(e/=1024,n=!0),t=n?e.toFixed(2)+" MB":e.toFixed(2)+" KB",t}}uploadToAppiyoDrive(e){this.userService.uploadToAppiyoDrive(e).subscribe(e=>{console.log(e),e.ok?this.documentUploadId=e.info.id:this.toasterService.showError(l.j.FILE_UPLOAD_FAILURE)},e=>{this.toasterService.showError(l.j.FILE_UPLOAD_FAILURE),console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(c.c),a.Pb(b.a),a.Pb(d.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-message-template"]],viewQuery:function(e,t){var n;1&e&&a.Nc(x,!0),2&e&&a.wc(n=a.hc())&&(t.labelImport=n.first)},decls:43,vars:11,consts:[[1,"main","text-center","mx-auto"],[1,"container"],[3,"formGroup"],[1,"form-group"],["for","template"],["formControlName","template","id","template","rows","3",1,"form-control"],[1,"input-group"],["placeholder","Campaign Start Date","formControlName","campaignStartDate","name","fromDate","ngbDatepicker","","readonly","",1,"form-control","bg-search","btn-outline-secondary",3,"maxDate","minDate","dateSelect"],["fromDate","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar-check-o"],["formControlName","triggerTime",3,"meridian","spinners"],["placeholder","Campaign End Date","name","endDate","formControlName","campaignEndDate","ngbDatepicker","","readonly","",1,"form-control","bg-search","btn-outline-secondary",3,"maxDate","minDate","dateSelect"],["endDate","ngbDatepicker"],[1,"custom-file"],["type","file","id","inputGroupFile","formControlName","importFile",1,"custom-file-input","xinput",3,"change"],["class","custom-button Xbox","type","button",3,"click",4,"ngIf"],["for","inputGroupFile",1,"custom-file-label"],["labelImport",""],["type","button",1,"btn","submit-btn","shadow",3,"disabled","click"],["class","spinner-border","style","width: 2rem; height: 2rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["type","button",1,"custom-button","Xbox",3,"click"],["aria-hidden","true",1,"spinner-border",2,"width","2rem","height","2rem"]],template:function(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"form",2),a.Ub(3,"div",3),a.Ub(4,"label",4),a.Ic(5,"Template"),a.Tb(),a.Qb(6,"textarea",5),a.Tb(),a.Ub(7,"div",3),a.Ub(8,"label"),a.Ic(9,"Campaign Start Date"),a.Tb(),a.Ub(10,"div",6),a.Ub(11,"input",7,8),a.gc("dateSelect",(function(e){return t.onFromDateChange(e)})),a.Tb(),a.Ub(13,"div",9),a.Ub(14,"button",10),a.gc("click",(function(){return a.zc(e),a.xc(12).toggle()})),a.Qb(15,"i",11),a.Tb(),a.Tb(),a.Qb(16,"br"),a.Tb(),a.Tb(),a.Ub(17,"div",3),a.Ub(18,"label"),a.Ic(19,"Trigger Time"),a.Tb(),a.Qb(20,"ngb-timepicker",12),a.Tb(),a.Ub(21,"div",3),a.Ub(22,"label"),a.Ic(23,"Campaign End Date"),a.Tb(),a.Ub(24,"div",6),a.Ub(25,"input",13,14),a.gc("dateSelect",(function(e){return t.onToDateChange(e)})),a.Tb(),a.Ub(27,"div",9),a.Ub(28,"button",10),a.gc("click",(function(){return a.zc(e),a.xc(26).toggle()})),a.Qb(29,"i",11),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(30,"div",3),a.Ub(31,"label"),a.Ic(32,"Choose File"),a.Tb(),a.Ub(33,"div",6),a.Ub(34,"div",15),a.Ub(35,"input",16),a.gc("change",(function(e){return t.onFileChange(e.target.files)})),a.Tb(),a.Gc(36,C,2,0,"button",17),a.Ub(37,"label",18,19),a.Ic(39,"Choose file"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(40,"button",20),a.gc("click",(function(){return t.onSubmit()})),a.Gc(41,I,1,0,"span",21),a.Gc(42,S,2,1,"span",22),a.Tb(),a.Tb(),a.Tb(),a.Tb()}2&e&&(a.Bb(2),a.pc("formGroup",t.form),a.Bb(9),a.pc("maxDate",t.fromMaxDate)("minDate",t.fromMinDate),a.Bb(9),a.pc("meridian",!1)("spinners",!1),a.Bb(5),a.pc("maxDate",t.toMaxDate)("minDate",t.toMinDate),a.Bb(11),a.pc("ngIf",t.fileToUpload),a.Bb(4),a.pc("disabled",t.form.invalid||t.loading),a.Bb(1),a.pc("ngIf",t.loading),a.Bb(1),a.pc("ngIf",!t.loading))},directives:[c.u,c.m,c.g,c.b,c.l,c.e,r.b,r.k,o.m],styles:['form[_ngcontent-%COMP%]{width:50%;margin:auto;text-align:left}.bg-search[_ngcontent-%COMP%]{background-color:#fff!important;color:#6c757d}.submit-btn[_ngcontent-%COMP%]{width:-webkit-fill-available;color:#fff;background-color:#97144d;border:1px solid #97144d;padding:10px;margin-top:10px;font-size:18px}textarea[_ngcontent-%COMP%]{border-color:#6c757d}.custom-file-label[_ngcontent-%COMP%]:after{cursor:pointer;position:absolute;top:0;right:0;bottom:0;z-index:3;display:block;height:calc(1.5em + .75rem);padding:.375rem .75rem;line-height:1.5;color:#fff;content:"Browse";background-color:#97146b;border-left:inherit;border-radius:0 .25rem .25rem 0}.custom-button[_ngcontent-%COMP%]{background-color:#97146b;margin-left:466px;color:#fff!important}.Xbox[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:45px;height:40px;position:absolute;right:90px;z-index:3333;top:0;border:none;border-bottom-left-radius:4px;border-top-left-radius:4px}.xinput[_ngcontent-%COMP%], .xinput[_ngcontent-%COMP%]:active, .xinput[_ngcontent-%COMP%]:focus, .xinput[_ngcontent-%COMP%]:only-child{z-index:1}']}),e})();const M=["labelImport"];function E(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",22),a.gc("click",(function(){return a.zc(e),a.jc().cancelFileUpload()})),a.Ic(1,"X"),a.Tb()}}function k(e,t){1&e&&a.Qb(0,"span",23)}function O(e,t){if(1&e&&(a.Ub(0,"span"),a.Ic(1),a.Tb()),2&e){const e=a.jc();a.Bb(1),a.Jc(e.submitButtonText)}}let w=(()=>{class e{constructor(e,t,n){this.formBuilder=e,this.userService=t,this.toasterService=n,this.submitButtonText=l.b.SUBMIT_BUTTON_TEXT,this.loading=!1,this.defaultTime={hour:12,minute:0},this.form=this.formBuilder.group({templateId:[null,c.s.required],template:[null,c.s.required],campaignDate:[new Date,c.s.required],triggerTime:[this.defaultTime,c.s.required],importFile:[null]})}ngOnInit(){}onSubmit(){const e=this.form.controls,t=e.campaignDate.value,n=e.triggerTime.value,o=`${t.year}-${t.month}-${t.day}`;this.fileUploadFlag=!!e.importFile.value,this.loading=!0,this.userService.createPromotionalTemplate(e.templateId.value,e.template.value,o,`${n.hour}:${n.minute}:00`,String(this.userService.currentUserValue.userId),this.fileUploadFlag,this.documentUploadId).subscribe(e=>{const{ProcessVariables:{status:t},ProcessVariables:{message:n={}}}=e;t?(this.toasterService.showSuccess(l.j.CREATE_PROMOTIONAL_TEMPLATE_SUCCESS),this.form.reset(),this.labelImport.nativeElement.innerText=l.j.LABLE_MESSAGE,this.documentUploadId=null,this.loading=!1,this.fileToUpload=null):(this.loading=!1,this.toasterService.showError(n.value))},e=>{this.loading=!1,this.toasterService.showError(e)})}onFileChange(e){this.labelImport.nativeElement.innerText=Array.from(e).map(e=>e.name).join(", "),this.fileToUpload=e.item(0),console.log("FiletoUpload"+this.fileToUpload);const t=String(this.userService.currentUserValue.userId),n=Object.defineProperty(this.fileToUpload,"name",{writable:!0,value:this.fileToUpload.name});n.name=t+"-"+(new Date).getTime()+"-"+n.name,console.log(n),this.uploadToAppiyoDrive(n)}cancelFileUpload(){this.form.controls.importFile.reset(),this.fileToUpload=null,this.fileUploadFlag=!1,this.documentUploadId=null,this.labelImport.nativeElement.innerText=l.j.LABLE_MESSAGE}uploadToAppiyoDrive(e){this.userService.uploadToAppiyoDrive(e).subscribe(e=>{console.log(e),e.ok?this.documentUploadId=e.info.id:this.toasterService.showError(l.j.FILE_UPLOAD_FAILURE)},e=>{this.toasterService.showError(l.j.FILE_UPLOAD_FAILURE),console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(c.c),a.Pb(b.a),a.Pb(d.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-promotional-template"]],viewQuery:function(e,t){var n;1&e&&a.Nc(M,!0),2&e&&a.wc(n=a.hc())&&(t.labelImport=n.first)},decls:37,vars:7,consts:[[1,"main","text-center","mx-auto"],[1,"container"],[3,"formGroup"],[1,"form-group"],["placeholder","Template Id","formControlName","templateId",1,"form-control","bg-search","btn-outline-secondary"],["for","template"],["formControlName","template","id","template","rows","3",1,"form-control"],[1,"input-group"],["placeholder","Campaign Date","formControlName","campaignDate","name","fromDate","ngbDatepicker","","readonly","",1,"form-control","bg-search","btn-outline-secondary"],["fromDate","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar-check-o"],["formControlName","triggerTime",3,"meridian","spinners"],[1,"custom-file"],["type","file","id","inputGroupFile","formControlName","importFile",1,"custom-file-input","xinput",3,"change"],["class","custom-button Xbox","type","button",3,"click",4,"ngIf"],["for","inputGroupFile",1,"custom-file-label"],["labelImport",""],["type","button",1,"btn","submit-btn","shadow",3,"disabled","click"],["class","spinner-border","style","width: 2rem; height: 2rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["type","button",1,"custom-button","Xbox",3,"click"],["aria-hidden","true",1,"spinner-border",2,"width","2rem","height","2rem"]],template:function(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"form",2),a.Ub(3,"div",3),a.Ub(4,"label"),a.Ic(5,"Template ID"),a.Tb(),a.Qb(6,"input",4),a.Tb(),a.Ub(7,"div",3),a.Ub(8,"label",5),a.Ic(9,"Template"),a.Tb(),a.Qb(10,"textarea",6),a.Tb(),a.Ub(11,"div",3),a.Ub(12,"label"),a.Ic(13,"Campaign Date"),a.Tb(),a.Ub(14,"div",7),a.Qb(15,"input",8,9),a.Ub(17,"div",10),a.Ub(18,"button",11),a.gc("click",(function(){return a.zc(e),a.xc(16).toggle()})),a.Qb(19,"i",12),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(20,"div",3),a.Ub(21,"label"),a.Ic(22,"Trigger Time"),a.Tb(),a.Qb(23,"ngb-timepicker",13),a.Tb(),a.Ub(24,"div",3),a.Ub(25,"label"),a.Ic(26,"Choose File"),a.Tb(),a.Ub(27,"div",7),a.Ub(28,"div",14),a.Ub(29,"input",15),a.gc("change",(function(e){return t.onFileChange(e.target.files)})),a.Tb(),a.Gc(30,E,2,0,"button",16),a.Ub(31,"label",17,18),a.Ic(33,"Choose file"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(34,"button",19),a.gc("click",(function(){return t.onSubmit()})),a.Gc(35,k,1,0,"span",20),a.Gc(36,O,2,1,"span",21),a.Tb(),a.Tb(),a.Tb(),a.Tb()}2&e&&(a.Bb(2),a.pc("formGroup",t.form),a.Bb(21),a.pc("meridian",!1)("spinners",!1),a.Bb(7),a.pc("ngIf",t.fileToUpload),a.Bb(4),a.pc("disabled",t.form.invalid||t.loading),a.Bb(1),a.pc("ngIf",t.loading),a.Bb(1),a.pc("ngIf",!t.loading))},directives:[c.u,c.m,c.g,c.b,c.l,c.e,r.b,r.k,o.m],styles:['form[_ngcontent-%COMP%]{width:50%;margin:auto;text-align:left}.bg-search[_ngcontent-%COMP%]{background-color:#fff!important;color:#6c757d}.submit-btn[_ngcontent-%COMP%]{width:-webkit-fill-available;color:#fff;background-color:#97144d;border:1px solid #97144d;padding:10px;margin-top:10px;font-size:18px}textarea[_ngcontent-%COMP%]{border-color:#6c757d}.custom-file-label[_ngcontent-%COMP%]:after{cursor:pointer;position:absolute;top:0;right:0;bottom:0;z-index:3;display:block;height:calc(1.5em + .75rem);padding:.375rem .75rem;line-height:1.5;color:#fff;content:"Browse";background-color:#97146b;border-left:inherit;border-radius:0 .25rem .25rem 0}.custom-button[_ngcontent-%COMP%]{background-color:#97146b;margin-left:466px;color:#fff!important}.Xbox[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:45px;height:40px;position:absolute;right:90px;z-index:3333;top:0;border:none;border-bottom-left-radius:4px;border-top-left-radius:4px}.xinput[_ngcontent-%COMP%], .xinput[_ngcontent-%COMP%]:active, .xinput[_ngcontent-%COMP%]:focus, .xinput[_ngcontent-%COMP%]:only-child{z-index:1}']}),e})();function B(e,t){1&e&&a.Qb(0,"span",16)}function _(e,t){if(1&e&&(a.Ub(0,"span"),a.Ic(1),a.Tb()),2&e){const e=a.jc();a.Bb(1),a.Kc(" ",e.submitButtonText,"")}}let F=(()=>{class e{constructor(e,t,n){this.formBuilder=e,this.userService=t,this.toasterService=n,this.submitButtonText=l.b.SUBMIT_BUTTON_TEXT,this.loading=!1,this.defaultTime={hour:12,minute:0},this.form=this.formBuilder.group({campaignStartDate:[new Date,c.s.required],campaignEndDate:[null,c.s.required],triggerTime:[this.defaultTime,c.s.required]})}ngOnInit(){this.setValidators()}setValidators(){new Date,this.fromMinDate={year:0,month:0,day:0},this.toMinDate={year:0,month:0,day:0}}onFromDateChange(e){const{year:t,month:n,day:o}=e;this.toMinDate={year:t,month:n,day:o}}onToDateChange(e){const{year:t,month:n,day:o}=e;this.fromMaxDate={year:t,month:n,day:o}}onSubmit(){if(this.form.valid){this.loading=!0;const e=this.form.controls,t=e.campaignStartDate.value,n=e.triggerTime.value,o=e.campaignEndDate.value;this.userService.createPreapprovedOffer(`${t.year}-${t.month}-${t.day}`,`${o.year}-${o.month}-${o.day}`,`${n.hour}:${n.minute}:00`,String(this.userService.currentUserValue.userId)).subscribe(e=>{const{ProcessVariables:{status:t},ProcessVariables:{message:n={}}}=e;t?(this.toasterService.showSuccess(l.j.CREATE_PREAPPROVED_OFFER_SUCCESS),this.form.reset(),this.loading=!1):(this.loading=!1,this.toasterService.showError(n.value))},e=>{this.loading=!1,this.toasterService.showError(e)})}}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(c.c),a.Pb(b.a),a.Pb(d.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-pre-approved-offers"]],decls:28,vars:10,consts:[[1,"main","text-center","mx-auto"],[1,"container"],[3,"formGroup"],[1,"form-group"],[1,"input-group"],["placeholder","Campaign Start Date","formControlName","campaignStartDate","name","fromDate","ngbDatepicker","","readonly","",1,"form-control","bg-search","btn-outline-secondary",3,"maxDate","minDate","dateSelect"],["fromDate","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar-check-o"],["formControlName","triggerTime",3,"meridian","spinners"],["placeholder","Campaign End Date","name","endDate","formControlName","campaignEndDate","ngbDatepicker","","readonly","",1,"form-control","bg-search","btn-outline-secondary",3,"maxDate","minDate","dateSelect"],["endDate","ngbDatepicker"],["type","button",1,"btn","submit-btn","shadow",3,"disabled","click"],["class","spinner-border","style","width: 2rem; height: 2rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["aria-hidden","true",1,"spinner-border",2,"width","2rem","height","2rem"]],template:function(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"form",2),a.Ub(3,"div",3),a.Ub(4,"label"),a.Ic(5,"Campaign Start Date"),a.Tb(),a.Ub(6,"div",4),a.Ub(7,"input",5,6),a.gc("dateSelect",(function(e){return t.onFromDateChange(e)})),a.Tb(),a.Ub(9,"div",7),a.Ub(10,"button",8),a.gc("click",(function(){return a.zc(e),a.xc(8).toggle()})),a.Qb(11,"i",9),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(12,"div",3),a.Ub(13,"label"),a.Ic(14,"Trigger Time"),a.Tb(),a.Qb(15,"ngb-timepicker",10),a.Tb(),a.Ub(16,"div",3),a.Ub(17,"label"),a.Ic(18,"Campaign End Date"),a.Tb(),a.Ub(19,"div",4),a.Ub(20,"input",11,12),a.gc("dateSelect",(function(e){return t.onToDateChange(e)})),a.Tb(),a.Ub(22,"div",7),a.Ub(23,"button",8),a.gc("click",(function(){return a.zc(e),a.xc(21).toggle()})),a.Qb(24,"i",9),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(25,"button",13),a.gc("click",(function(){return t.onSubmit()})),a.Gc(26,B,1,0,"span",14),a.Gc(27,_,2,1,"span",15),a.Tb(),a.Tb(),a.Tb(),a.Tb()}2&e&&(a.Bb(2),a.pc("formGroup",t.form),a.Bb(5),a.pc("maxDate",t.fromMaxDate)("minDate",t.fromMinDate),a.Bb(8),a.pc("meridian",!1)("spinners",!1),a.Bb(5),a.pc("maxDate",t.toMaxDate)("minDate",t.toMinDate),a.Bb(5),a.pc("disabled",t.form.invalid||t.loading),a.Bb(1),a.pc("ngIf",t.loading),a.Bb(1),a.pc("ngIf",!t.loading))},directives:[c.u,c.m,c.g,c.b,r.b,c.l,c.e,r.k,o.m],styles:["form[_ngcontent-%COMP%]{width:50%;margin:auto;text-align:left}.bg-search[_ngcontent-%COMP%]{background-color:#fff!important;color:#6c757d}.submit-btn[_ngcontent-%COMP%]{width:-webkit-fill-available;color:#fff;background-color:#97144d;border:1px solid #97144d;padding:10px;margin-top:10px;font-size:18px}"]}),e})();function G(e,t){1&e&&(a.Ub(0,"span",7),a.Ic(1,"Dashboard"),a.Tb())}function A(e,t){1&e&&a.Qb(0,"app-dashboard")}function V(e,t){1&e&&(a.Ub(0,"span",7),a.Ic(1,"Message Template"),a.Tb())}function L(e,t){1&e&&a.Qb(0,"app-message-template")}function j(e,t){1&e&&(a.Ub(0,"span",7),a.Ic(1,"Promotional Template"),a.Tb())}function z(e,t){1&e&&a.Qb(0,"app-promotional-template")}function $(e,t){1&e&&(a.Ub(0,"span",7),a.Ic(1,"Pre Approved Offers"),a.Tb())}function Q(e,t){1&e&&a.Qb(0,"app-pre-approved-offers")}const N=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Jb({type:e,selectors:[["app-marketing-maker"]],decls:17,vars:0,consts:[[1,"main"],[1,"container"],[1,"row"],[1,"col","card","shadow","p-0"],["justify","justified"],["ngbTabTitle",""],["ngbTabContent",""],[1,"tab-title"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"ngb-tabset",4),a.Ub(5,"ngb-tab"),a.Gc(6,G,2,0,"ng-template",5),a.Gc(7,A,1,0,"ng-template",6),a.Tb(),a.Ub(8,"ngb-tab"),a.Gc(9,V,2,0,"ng-template",5),a.Gc(10,L,1,0,"ng-template",6),a.Tb(),a.Ub(11,"ngb-tab"),a.Gc(12,j,2,0,"ng-template",5),a.Gc(13,z,1,0,"ng-template",6),a.Tb(),a.Ub(14,"ngb-tab"),a.Gc(15,$,2,0,"ng-template",5),a.Gc(16,Q,1,0,"ng-template",6),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb())},directives:[r.j,r.g,r.i,r.h,y,P,w,F],styles:[".tab-title[_ngcontent-%COMP%]{font-size:18px}"]}),e})(),pathMatch:"full"}];let R=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[i.e.forChild(N)],i.e]}),e})();var q=n("PCNd"),J=n("hctd");let X=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[o.c,R,q.a,J.a]]}),e})()}}]);