function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{sjZA:function(e,t,n){"use strict";n.r(t),n.d(t,"MarketingMakerModule",(function(){return te}));var a=n("ofXK"),o=n("tyNb"),i=n("fXoL"),r=n("1kSV"),c=n("3Pt+"),l=n("y1cd"),s=n("SaRM"),b=n("kmKP"),u=n("mAmA");function d(e,t){1&e&&i.Qb(0,"ngb-progressbar",23),2&e&&i.pc("value",100)("striped",!0)("animated",!0)}function p(e,t){if(1&e&&(i.Ub(0,"option",24),i.Ic(1),i.Tb()),2&e){var n=t.$implicit;i.pc("value",n.value),i.Bb(1),i.Jc(n.name)}}function m(e,t){if(1&e&&(i.Ub(0,"th",25),i.Ic(1),i.Tb()),2&e){var n=t.$implicit;i.Bb(1),i.Jc(n)}}function f(e,t){if(1&e&&(i.Ub(0,"span"),i.Qb(1,"br"),i.Ic(2),i.kc(3,"date"),i.Tb()),2&e){var n=i.jc().$implicit;i.Bb(2),i.Kc("END DATE - ",i.mc(3,1,n.endDate,"yyyy-MM-dd"),"")}}function g(e,t){1&e&&(i.Ub(0,"span",30),i.Ic(1,"SUBMITTED"),i.Tb())}function h(e,t){1&e&&(i.Ub(0,"span",31),i.Ic(1,"APPROVED"),i.Tb())}function v(e,t){1&e&&(i.Ub(0,"span",32),i.Ic(1,"REJECTED"),i.Tb())}function T(e,t){if(1&e&&(i.Ub(0,"span"),i.Ic(1),i.Tb()),2&e){var n=i.jc().$implicit;i.Bb(1),i.Jc(n.reason)}}function U(e,t){1&e&&(i.Ub(0,"span"),i.Ic(1,"--"),i.Tb())}function y(e,t){if(1&e&&(i.Ub(0,"tr"),i.Ub(1,"td"),i.Ub(2,"a"),i.Ic(3),i.Tb(),i.Tb(),i.Ub(4,"td"),i.Ic(5),i.Tb(),i.Ub(6,"td"),i.Ub(7,"span"),i.Ic(8),i.kc(9,"date"),i.Tb(),i.Qb(10,"br"),i.Ub(11,"span"),i.Ic(12),i.Tb(),i.Gc(13,f,4,4,"span",26),i.Tb(),i.Ub(14,"td"),i.Gc(15,g,2,0,"span",27),i.Gc(16,h,2,0,"span",28),i.Gc(17,v,2,0,"span",29),i.Qb(18,"br"),i.Tb(),i.Ub(19,"td"),i.Gc(20,T,2,1,"span",26),i.Gc(21,U,2,0,"span",26),i.Tb(),i.Tb()),2&e){var n=t.$implicit;i.Bb(3),i.Jc(n.id),i.Bb(2),i.Kc(" ",n.template," "),i.Bb(3),i.Kc("START DATE - ",i.mc(9,10,n.startDate,"yyyy-MM-dd"),""),i.Bb(4),i.Kc("TRIGGER TIME - ",n.triggerTime,""),i.Bb(1),i.pc("ngIf",n.endDate),i.Bb(2),i.pc("ngIf","10"===n.status),i.Bb(1),i.pc("ngIf","30"===n.status),i.Bb(1),i.pc("ngIf","20"===n.status),i.Bb(3),i.pc("ngIf","20"===n.status),i.Bb(1),i.pc("ngIf","20"!==n.status)}}var D,C=((D=function(){function e(t,n,a,o){_classCallCheck(this,e),this.formBuilder=t,this.referenceService=n,this.userService=a,this.toasterService=o,this.loading=!1,this.currentPage=1,this.pageSize=10,this.templates=[],this.isFilterValid=!1,this.filterOptions=[{name:"ALL",value:"40"},{name:"SUBMITTED",value:"10"},{name:"APPROVED",value:"30"},{name:"REJECTED",value:"20"}],this.tableHeaders=["Template Id","Template","Schedule","Status","Reason"],this.form=this.formBuilder.group({fromDate:[null,c.s.required],toDate:[null,c.s.required],filterType:[l.i.ALL,c.s.required]})}return _createClass(e,[{key:"ngOnInit",value:function(){this.setValidators(),this.fetchTemplates()}},{key:"setValidators",value:function(){var e=this.referenceService.getDefaultDateValidators(),t=e.minDate,n=e.maxDate;this.fromMinDate=t,this.fromMaxDate=n,this.toMinDate=t,this.toMaxDate=n}},{key:"onFromDateChange",value:function(e){var t=e.year,n=e.month,a=e.day;this.toMinDate={year:t,month:n,day:a},this.validate()}},{key:"onToDateChange",value:function(e){var t=e.year,n=e.month,a=e.day;this.fromMaxDate={year:t,month:n,day:a},this.validate()}},{key:"onFilterTypeChange",value:function(e){this.validate()}},{key:"validate",value:function(){this.form.valid?(this.isFilterValid=!0,this.fetchFilteredTemplates()):this.isFilterValid=!1}},{key:"onPageChanged",value:function(e){this.currentPage=e,this.isFilterValid?this.fetchFilteredTemplates():this.fetchTemplates()}},{key:"fetchFilteredTemplates",value:function(){var e=this;this.templates=null,window.scroll(0,0),this.loading=!0;var t=this.form.controls,n=t.fromDate.value,a=t.toDate.value,o=t.filterType.value;this.userService.fetchTemplates(this.currentPage,"".concat(n.year,"-").concat(n.month,"-").concat(n.day),"".concat(a.year,"-").concat(a.month,"-").concat(a.day),o===l.i.ALL?"":o).subscribe((function(t){var n=t.ProcessVariables.status,a=t.ProcessVariables.message,o=void 0===a?{}:a;n?(e.templates=t.ProcessVariables.templateList,e.collectionSize=t.ProcessVariables.totalCount,e.loading=!1):(e.loading=!1,e.toasterService.showError(o.value))}),(function(t){e.loading=!1,e.toasterService.showError(t)}))}},{key:"fetchTemplates",value:function(){var e=this;this.templates=null,window.scroll(0,0),this.loading=!0,this.userService.fetchTemplates(this.currentPage,"","","").subscribe((function(t){var n=t.ProcessVariables.status,a=t.ProcessVariables.message,o=void 0===a?{}:a;n?(e.templates=t.ProcessVariables.templateList,e.collectionSize=t.ProcessVariables.totalCount,e.loading=!1):(e.loading=!1,e.toasterService.showError(o.value))}),(function(t){e.loading=!1,e.toasterService.showError(t)}))}}]),e}()).\u0275fac=function(e){return new(e||D)(i.Pb(c.c),i.Pb(s.a),i.Pb(b.a),i.Pb(u.a))},D.\u0275cmp=i.Jb({type:D,selectors:[["app-dashboard"]],decls:32,vars:13,consts:[["type","dark","height","0.5rem",3,"value","striped","animated",4,"ngIf"],[1,"row","p-3"],[1,"col-6"],[3,"formGroup"],[1,"form-row"],[1,"col"],[1,"input-group"],["placeholder","From Date","name","fromDate","formControlName","fromDate","ngbDatepicker","","readonly","",1,"form-control","bg-search","btn-outline-secondary",3,"maxDate","minDate","dateSelect"],["fromDate","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar-check-o"],["placeholder","To Date","name","toDate","formControlName","toDate","ngbDatepicker","","readonly","",1,"form-control","bg-search","btn-outline-secondary",3,"maxDate","minDate","dateSelect"],["toDate","ngbDatepicker"],["formControlName","filterType","title","Filter Type","id","role",1,"custom-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive"],[1,"table"],[1,"thead-light"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","p-2"],[3,"boundaryLinks","collectionSize","page","pageSize","pageChange"],["type","dark","height","0.5rem",3,"value","striped","animated"],[3,"value"],["scope","col"],[4,"ngIf"],["class","p-1 bg-maroon rounded-pill",4,"ngIf"],["class","p-1 approved-btn rounded-pill",4,"ngIf"],["class","p-1 rejected-btn rounded-pill",4,"ngIf"],[1,"p-1","bg-maroon","rounded-pill"],[1,"p-1","approved-btn","rounded-pill"],[1,"p-1","rejected-btn","rounded-pill"]],template:function(e,t){if(1&e){var n=i.Vb();i.Gc(0,d,1,3,"ngb-progressbar",0),i.Ub(1,"div",1),i.Qb(2,"div",2),i.Ub(3,"div",2),i.Ub(4,"form",3),i.Ub(5,"div",4),i.Ub(6,"div",5),i.Ub(7,"div",6),i.Ub(8,"input",7,8),i.gc("dateSelect",(function(e){return t.onFromDateChange(e)})),i.Tb(),i.Ub(10,"div",9),i.Ub(11,"button",10),i.gc("click",(function(){return i.zc(n),i.xc(9).toggle()})),i.Qb(12,"i",11),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(13,"div",5),i.Ub(14,"div",6),i.Ub(15,"input",12,13),i.gc("dateSelect",(function(e){return t.onToDateChange(e)})),i.Tb(),i.Ub(17,"div",9),i.Ub(18,"button",10),i.gc("click",(function(){return i.zc(n),i.xc(16).toggle()})),i.Qb(19,"i",11),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(20,"div",5),i.Ub(21,"select",14),i.gc("change",(function(e){return t.onFilterTypeChange(e)})),i.Gc(22,p,2,2,"option",15),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(23,"div",16),i.Ub(24,"table",17),i.Ub(25,"thead",18),i.Ub(26,"tr"),i.Gc(27,m,2,1,"th",19),i.Tb(),i.Tb(),i.Ub(28,"tbody"),i.Gc(29,y,22,13,"tr",20),i.Tb(),i.Tb(),i.Ub(30,"div",21),i.Ub(31,"ngb-pagination",22),i.gc("pageChange",(function(e){return t.currentPage=e}))("pageChange",(function(){return t.onPageChanged(t.currentPage)})),i.Tb(),i.Tb(),i.Tb()}2&e&&(i.pc("ngIf",t.loading),i.Bb(4),i.pc("formGroup",t.form),i.Bb(4),i.pc("maxDate",t.fromMaxDate)("minDate",t.fromMinDate),i.Bb(7),i.pc("maxDate",t.toMaxDate)("minDate",t.toMinDate),i.Bb(7),i.pc("ngForOf",t.filterOptions),i.Bb(5),i.pc("ngForOf",t.tableHeaders),i.Bb(2),i.pc("ngForOf",t.templates),i.Bb(2),i.pc("boundaryLinks",!0)("collectionSize",t.collectionSize)("page",t.currentPage)("pageSize",t.pageSize))},directives:[a.m,c.u,c.m,c.g,c.b,r.b,c.l,c.e,c.r,a.l,r.e,r.f,c.o,c.t],pipes:[a.e],styles:["tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;color:#97144d}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle;color:#97144d!important}table[_ngcontent-%COMP%]{margin-bottom:0!important}.bg-search[_ngcontent-%COMP%]{background-color:#fff!important;color:#6c757d}.action-btn[_ngcontent-%COMP%]{background-color:#97144d;border:1px solid #97144d}.action-btn[_ngcontent-%COMP%], .rejected-btn[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-transform:uppercase}.rejected-btn[_ngcontent-%COMP%]{background-color:#8b0000;border:1px solid #8b0000}.approved-btn[_ngcontent-%COMP%]{color:#fff;background-color:#006400;border:1px solid #006400;font-size:12px;text-transform:uppercase}"]}),D),k=["labelImport"];function x(e,t){if(1&e){var n=i.Vb();i.Ub(0,"button",23),i.gc("click",(function(){return i.zc(n),i.jc().cancelFileUpload()})),i.Ic(1,"X"),i.Tb()}}function I(e,t){1&e&&i.Qb(0,"span",24)}function S(e,t){if(1&e&&(i.Ub(0,"span"),i.Ic(1),i.Tb()),2&e){var n=i.jc();i.Bb(1),i.Kc(" ",n.submitButtonText,"")}}var P,M=((P=function(){function e(t,n,a){_classCallCheck(this,e),this.formBuilder=t,this.userService=n,this.toasterService=a,this.submitButtonText=l.b.SUBMIT_BUTTON_TEXT,this.loading=!1,this.defaultTime={hour:12,minute:0},this.form=this.formBuilder.group({template:[null,c.s.required],campaignStartDate:[new Date,c.s.required],campaignEndDate:[null,c.s.required],triggerTime:[this.defaultTime,c.s.required],importFile:[null]})}return _createClass(e,[{key:"ngOnInit",value:function(){this.setValidators()}},{key:"setValidators",value:function(){var e=new Date;console.log("Date"+e.getDate()+" "+e.getFullYear()+" "+e.getMonth()),this.fromMinDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()},this.toMinDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}},{key:"onFromDateChange",value:function(e){var t=e.year,n=e.month,a=e.day;this.toMinDate={year:t,month:n,day:a}}},{key:"onToDateChange",value:function(e){var t=e.year,n=e.month,a=e.day;this.fromMaxDate={year:t,month:n,day:a}}},{key:"onSubmit",value:function(){var e=this;if(this.form.valid){this.loading=!0;var t=this.form.controls,n=t.campaignStartDate.value,a=t.triggerTime.value,o=t.campaignEndDate.value;this.fileUploadFlag=!!t.importFile.value,this.userService.createMessageTemplate(t.template.value,"".concat(n.year,"-").concat(n.month,"-").concat(n.day),"".concat(o.year,"-").concat(o.month,"-").concat(o.day),"".concat(a.hour,":").concat(a.minute,":00"),String(this.userService.currentUserValue.userId),this.fileUploadFlag,this.documentUploadId).subscribe((function(t){var n=t.ProcessVariables.status,a=t.ProcessVariables.message,o=void 0===a?{}:a;n?(e.toasterService.showSuccess(l.j.CREATE_MESSAGE_TEMPLATE_SUCCESS),e.form.reset(),e.labelImport.nativeElement.innerText=l.j.LABLE_MESSAGE,e.documentUploadId=null,e.loading=!1,e.fileToUpload=null):(e.loading=!1,e.toasterService.showError(o.value))}),(function(t){e.loading=!1,e.toasterService.showError(t)}))}}},{key:"onFileChange",value:function(e){this.labelImport.nativeElement.innerText=Array.from(e).map((function(e){return e.name})).join(", "),this.fileToUpload=e.item(0),console.log("FiletoUpload"+this.fileToUpload);var t=String(this.userService.currentUserValue.userId),n=Object.defineProperty(this.fileToUpload,"name",{writable:!0,value:this.fileToUpload.name});n.name=t+"-"+(new Date).getTime()+"-"+n.name,console.log(n),this.uploadToAppiyoDrive(n)}},{key:"cancelFileUpload",value:function(){this.form.controls.importFile.reset(),this.fileToUpload=null,this.fileUploadFlag=!1,this.documentUploadId=null,this.labelImport.nativeElement.innerText=l.j.LABLE_MESSAGE}},{key:"getFileSize",value:function(e){if(e/1024/1024>2)return null;var t=!1;return(e/=1024)>=1024&&(e/=1024,t=!0),t?e.toFixed(2)+" MB":e.toFixed(2)+" KB"}},{key:"uploadToAppiyoDrive",value:function(e){var t=this;this.userService.uploadToAppiyoDrive(e).subscribe((function(e){console.log(e),e.ok?t.documentUploadId=e.info.id:t.toasterService.showError(l.j.FILE_UPLOAD_FAILURE)}),(function(e){t.toasterService.showError(l.j.FILE_UPLOAD_FAILURE),console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||P)(i.Pb(c.c),i.Pb(b.a),i.Pb(u.a))},P.\u0275cmp=i.Jb({type:P,selectors:[["app-message-template"]],viewQuery:function(e,t){var n;1&e&&i.Nc(k,!0),2&e&&i.wc(n=i.hc())&&(t.labelImport=n.first)},decls:43,vars:11,consts:[[1,"main","text-center","mx-auto"],[1,"container"],[3,"formGroup"],[1,"form-group"],["for","template"],["formControlName","template","id","template","rows","3",1,"form-control"],[1,"input-group"],["placeholder","Campaign Start Date","formControlName","campaignStartDate","name","fromDate","ngbDatepicker","","readonly","",1,"form-control","bg-search","btn-outline-secondary",3,"maxDate","minDate","dateSelect"],["fromDate","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar-check-o"],["formControlName","triggerTime",3,"meridian","spinners"],["placeholder","Campaign End Date","name","endDate","formControlName","campaignEndDate","ngbDatepicker","","readonly","",1,"form-control","bg-search","btn-outline-secondary",3,"maxDate","minDate","dateSelect"],["endDate","ngbDatepicker"],[1,"custom-file"],["type","file","id","inputGroupFile","formControlName","importFile",1,"custom-file-input","xinput",3,"change"],["class","custom-button Xbox","type","button",3,"click",4,"ngIf"],["for","inputGroupFile",1,"custom-file-label"],["labelImport",""],["type","button",1,"btn","submit-btn","shadow",3,"disabled","click"],["class","spinner-border","style","width: 2rem; height: 2rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["type","button",1,"custom-button","Xbox",3,"click"],["aria-hidden","true",1,"spinner-border",2,"width","2rem","height","2rem"]],template:function(e,t){if(1&e){var n=i.Vb();i.Ub(0,"div",0),i.Ub(1,"div",1),i.Ub(2,"form",2),i.Ub(3,"div",3),i.Ub(4,"label",4),i.Ic(5,"Template"),i.Tb(),i.Qb(6,"textarea",5),i.Tb(),i.Ub(7,"div",3),i.Ub(8,"label"),i.Ic(9,"Campaign Start Date"),i.Tb(),i.Ub(10,"div",6),i.Ub(11,"input",7,8),i.gc("dateSelect",(function(e){return t.onFromDateChange(e)})),i.Tb(),i.Ub(13,"div",9),i.Ub(14,"button",10),i.gc("click",(function(){return i.zc(n),i.xc(12).toggle()})),i.Qb(15,"i",11),i.Tb(),i.Tb(),i.Qb(16,"br"),i.Tb(),i.Tb(),i.Ub(17,"div",3),i.Ub(18,"label"),i.Ic(19,"Trigger Time"),i.Tb(),i.Qb(20,"ngb-timepicker",12),i.Tb(),i.Ub(21,"div",3),i.Ub(22,"label"),i.Ic(23,"Campaign End Date"),i.Tb(),i.Ub(24,"div",6),i.Ub(25,"input",13,14),i.gc("dateSelect",(function(e){return t.onToDateChange(e)})),i.Tb(),i.Ub(27,"div",9),i.Ub(28,"button",10),i.gc("click",(function(){return i.zc(n),i.xc(26).toggle()})),i.Qb(29,"i",11),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(30,"div",3),i.Ub(31,"label"),i.Ic(32,"Choose File"),i.Tb(),i.Ub(33,"div",6),i.Ub(34,"div",15),i.Ub(35,"input",16),i.gc("change",(function(e){return t.onFileChange(e.target.files)})),i.Tb(),i.Gc(36,x,2,0,"button",17),i.Ub(37,"label",18,19),i.Ic(39,"Choose file"),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(40,"button",20),i.gc("click",(function(){return t.onSubmit()})),i.Gc(41,I,1,0,"span",21),i.Gc(42,S,2,1,"span",22),i.Tb(),i.Tb(),i.Tb(),i.Tb()}2&e&&(i.Bb(2),i.pc("formGroup",t.form),i.Bb(9),i.pc("maxDate",t.fromMaxDate)("minDate",t.fromMinDate),i.Bb(9),i.pc("meridian",!1)("spinners",!1),i.Bb(5),i.pc("maxDate",t.toMaxDate)("minDate",t.toMinDate),i.Bb(11),i.pc("ngIf",t.fileToUpload),i.Bb(4),i.pc("disabled",t.form.invalid||t.loading),i.Bb(1),i.pc("ngIf",t.loading),i.Bb(1),i.pc("ngIf",!t.loading))},directives:[c.u,c.m,c.g,c.b,c.l,c.e,r.b,r.k,a.m],styles:['form[_ngcontent-%COMP%]{width:50%;margin:auto;text-align:left}.bg-search[_ngcontent-%COMP%]{background-color:#fff!important;color:#6c757d}.submit-btn[_ngcontent-%COMP%]{width:-webkit-fill-available;color:#fff;background-color:#97144d;border:1px solid #97144d;padding:10px;margin-top:10px;font-size:18px}textarea[_ngcontent-%COMP%]{border-color:#6c757d}.custom-file-label[_ngcontent-%COMP%]:after{cursor:pointer;position:absolute;top:0;right:0;bottom:0;z-index:3;display:block;height:calc(1.5em + .75rem);padding:.375rem .75rem;line-height:1.5;color:#fff;content:"Browse";background-color:#97146b;border-left:inherit;border-radius:0 .25rem .25rem 0}.custom-button[_ngcontent-%COMP%]{background-color:#97146b;margin-left:466px;color:#fff!important}.Xbox[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:45px;height:40px;position:absolute;right:90px;z-index:3333;top:0;border:none;border-bottom-left-radius:4px;border-top-left-radius:4px}.xinput[_ngcontent-%COMP%], .xinput[_ngcontent-%COMP%]:active, .xinput[_ngcontent-%COMP%]:focus, .xinput[_ngcontent-%COMP%]:only-child{z-index:1}']}),P),_=["labelImport"];function E(e,t){if(1&e){var n=i.Vb();i.Ub(0,"button",22),i.gc("click",(function(){return i.zc(n),i.jc().cancelFileUpload()})),i.Ic(1,"X"),i.Tb()}}function w(e,t){1&e&&i.Qb(0,"span",23)}function O(e,t){if(1&e&&(i.Ub(0,"span"),i.Ic(1),i.Tb()),2&e){var n=i.jc();i.Bb(1),i.Jc(n.submitButtonText)}}var B,F=((B=function(){function e(t,n,a){_classCallCheck(this,e),this.formBuilder=t,this.userService=n,this.toasterService=a,this.submitButtonText=l.b.SUBMIT_BUTTON_TEXT,this.loading=!1,this.defaultTime={hour:12,minute:0},this.form=this.formBuilder.group({templateId:[null,c.s.required],template:[null,c.s.required],campaignDate:[new Date,c.s.required],triggerTime:[this.defaultTime,c.s.required],importFile:[null]})}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onSubmit",value:function(){var e=this,t=this.form.controls,n=t.campaignDate.value,a=t.triggerTime.value,o="".concat(n.year,"-").concat(n.month,"-").concat(n.day);this.fileUploadFlag=!!t.importFile.value,this.loading=!0,this.userService.createPromotionalTemplate(t.templateId.value,t.template.value,o,"".concat(a.hour,":").concat(a.minute,":00"),String(this.userService.currentUserValue.userId),this.fileUploadFlag,this.documentUploadId).subscribe((function(t){var n=t.ProcessVariables.status,a=t.ProcessVariables.message,o=void 0===a?{}:a;n?(e.toasterService.showSuccess(l.j.CREATE_PROMOTIONAL_TEMPLATE_SUCCESS),e.form.reset(),e.labelImport.nativeElement.innerText=l.j.LABLE_MESSAGE,e.documentUploadId=null,e.loading=!1,e.fileToUpload=null):(e.loading=!1,e.toasterService.showError(o.value))}),(function(t){e.loading=!1,e.toasterService.showError(t)}))}},{key:"onFileChange",value:function(e){this.labelImport.nativeElement.innerText=Array.from(e).map((function(e){return e.name})).join(", "),this.fileToUpload=e.item(0),console.log("FiletoUpload"+this.fileToUpload);var t=String(this.userService.currentUserValue.userId),n=Object.defineProperty(this.fileToUpload,"name",{writable:!0,value:this.fileToUpload.name});n.name=t+"-"+(new Date).getTime()+"-"+n.name,console.log(n),this.uploadToAppiyoDrive(n)}},{key:"cancelFileUpload",value:function(){this.form.controls.importFile.reset(),this.fileToUpload=null,this.fileUploadFlag=!1,this.documentUploadId=null,this.labelImport.nativeElement.innerText=l.j.LABLE_MESSAGE}},{key:"uploadToAppiyoDrive",value:function(e){var t=this;this.userService.uploadToAppiyoDrive(e).subscribe((function(e){console.log(e),e.ok?t.documentUploadId=e.info.id:t.toasterService.showError(l.j.FILE_UPLOAD_FAILURE)}),(function(e){t.toasterService.showError(l.j.FILE_UPLOAD_FAILURE),console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||B)(i.Pb(c.c),i.Pb(b.a),i.Pb(u.a))},B.\u0275cmp=i.Jb({type:B,selectors:[["app-promotional-template"]],viewQuery:function(e,t){var n;1&e&&i.Nc(_,!0),2&e&&i.wc(n=i.hc())&&(t.labelImport=n.first)},decls:37,vars:7,consts:[[1,"main","text-center","mx-auto"],[1,"container"],[3,"formGroup"],[1,"form-group"],["placeholder","Template Id","formControlName","templateId",1,"form-control","bg-search","btn-outline-secondary"],["for","template"],["formControlName","template","id","template","rows","3",1,"form-control"],[1,"input-group"],["placeholder","Campaign Date","formControlName","campaignDate","name","fromDate","ngbDatepicker","","readonly","",1,"form-control","bg-search","btn-outline-secondary"],["fromDate","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar-check-o"],["formControlName","triggerTime",3,"meridian","spinners"],[1,"custom-file"],["type","file","id","inputGroupFile","formControlName","importFile",1,"custom-file-input","xinput",3,"change"],["class","custom-button Xbox","type","button",3,"click",4,"ngIf"],["for","inputGroupFile",1,"custom-file-label"],["labelImport",""],["type","button",1,"btn","submit-btn","shadow",3,"disabled","click"],["class","spinner-border","style","width: 2rem; height: 2rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["type","button",1,"custom-button","Xbox",3,"click"],["aria-hidden","true",1,"spinner-border",2,"width","2rem","height","2rem"]],template:function(e,t){if(1&e){var n=i.Vb();i.Ub(0,"div",0),i.Ub(1,"div",1),i.Ub(2,"form",2),i.Ub(3,"div",3),i.Ub(4,"label"),i.Ic(5,"Template ID"),i.Tb(),i.Qb(6,"input",4),i.Tb(),i.Ub(7,"div",3),i.Ub(8,"label",5),i.Ic(9,"Template"),i.Tb(),i.Qb(10,"textarea",6),i.Tb(),i.Ub(11,"div",3),i.Ub(12,"label"),i.Ic(13,"Campaign Date"),i.Tb(),i.Ub(14,"div",7),i.Qb(15,"input",8,9),i.Ub(17,"div",10),i.Ub(18,"button",11),i.gc("click",(function(){return i.zc(n),i.xc(16).toggle()})),i.Qb(19,"i",12),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(20,"div",3),i.Ub(21,"label"),i.Ic(22,"Trigger Time"),i.Tb(),i.Qb(23,"ngb-timepicker",13),i.Tb(),i.Ub(24,"div",3),i.Ub(25,"label"),i.Ic(26,"Choose File"),i.Tb(),i.Ub(27,"div",7),i.Ub(28,"div",14),i.Ub(29,"input",15),i.gc("change",(function(e){return t.onFileChange(e.target.files)})),i.Tb(),i.Gc(30,E,2,0,"button",16),i.Ub(31,"label",17,18),i.Ic(33,"Choose file"),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(34,"button",19),i.gc("click",(function(){return t.onSubmit()})),i.Gc(35,w,1,0,"span",20),i.Gc(36,O,2,1,"span",21),i.Tb(),i.Tb(),i.Tb(),i.Tb()}2&e&&(i.Bb(2),i.pc("formGroup",t.form),i.Bb(21),i.pc("meridian",!1)("spinners",!1),i.Bb(7),i.pc("ngIf",t.fileToUpload),i.Bb(4),i.pc("disabled",t.form.invalid||t.loading),i.Bb(1),i.pc("ngIf",t.loading),i.Bb(1),i.pc("ngIf",!t.loading))},directives:[c.u,c.m,c.g,c.b,c.l,c.e,r.b,r.k,a.m],styles:['form[_ngcontent-%COMP%]{width:50%;margin:auto;text-align:left}.bg-search[_ngcontent-%COMP%]{background-color:#fff!important;color:#6c757d}.submit-btn[_ngcontent-%COMP%]{width:-webkit-fill-available;color:#fff;background-color:#97144d;border:1px solid #97144d;padding:10px;margin-top:10px;font-size:18px}textarea[_ngcontent-%COMP%]{border-color:#6c757d}.custom-file-label[_ngcontent-%COMP%]:after{cursor:pointer;position:absolute;top:0;right:0;bottom:0;z-index:3;display:block;height:calc(1.5em + .75rem);padding:.375rem .75rem;line-height:1.5;color:#fff;content:"Browse";background-color:#97146b;border-left:inherit;border-radius:0 .25rem .25rem 0}.custom-button[_ngcontent-%COMP%]{background-color:#97146b;margin-left:466px;color:#fff!important}.Xbox[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:45px;height:40px;position:absolute;right:90px;z-index:3333;top:0;border:none;border-bottom-left-radius:4px;border-top-left-radius:4px}.xinput[_ngcontent-%COMP%], .xinput[_ngcontent-%COMP%]:active, .xinput[_ngcontent-%COMP%]:focus, .xinput[_ngcontent-%COMP%]:only-child{z-index:1}']}),B);function G(e,t){1&e&&i.Qb(0,"span",16)}function A(e,t){if(1&e&&(i.Ub(0,"span"),i.Ic(1),i.Tb()),2&e){var n=i.jc();i.Bb(1),i.Kc(" ",n.submitButtonText,"")}}var V,j=((V=function(){function e(t,n,a){_classCallCheck(this,e),this.formBuilder=t,this.userService=n,this.toasterService=a,this.submitButtonText=l.b.SUBMIT_BUTTON_TEXT,this.loading=!1,this.defaultTime={hour:12,minute:0},this.form=this.formBuilder.group({campaignStartDate:[new Date,c.s.required],campaignEndDate:[null,c.s.required],triggerTime:[this.defaultTime,c.s.required]})}return _createClass(e,[{key:"ngOnInit",value:function(){this.setValidators()}},{key:"setValidators",value:function(){new Date,this.fromMinDate={year:0,month:0,day:0},this.toMinDate={year:0,month:0,day:0}}},{key:"onFromDateChange",value:function(e){var t=e.year,n=e.month,a=e.day;this.toMinDate={year:t,month:n,day:a}}},{key:"onToDateChange",value:function(e){var t=e.year,n=e.month,a=e.day;this.fromMaxDate={year:t,month:n,day:a}}},{key:"onSubmit",value:function(){var e=this;if(this.form.valid){this.loading=!0;var t=this.form.controls,n=t.campaignStartDate.value,a=t.triggerTime.value,o=t.campaignEndDate.value;this.userService.createPreapprovedOffer("".concat(n.year,"-").concat(n.month,"-").concat(n.day),"".concat(o.year,"-").concat(o.month,"-").concat(o.day),"".concat(a.hour,":").concat(a.minute,":00"),String(this.userService.currentUserValue.userId)).subscribe((function(t){var n=t.ProcessVariables.status,a=t.ProcessVariables.message,o=void 0===a?{}:a;n?(e.toasterService.showSuccess(l.j.CREATE_PREAPPROVED_OFFER_SUCCESS),e.form.reset(),e.loading=!1):(e.loading=!1,e.toasterService.showError(o.value))}),(function(t){e.loading=!1,e.toasterService.showError(t)}))}}}]),e}()).\u0275fac=function(e){return new(e||V)(i.Pb(c.c),i.Pb(b.a),i.Pb(u.a))},V.\u0275cmp=i.Jb({type:V,selectors:[["app-pre-approved-offers"]],decls:28,vars:10,consts:[[1,"main","text-center","mx-auto"],[1,"container"],[3,"formGroup"],[1,"form-group"],[1,"input-group"],["placeholder","Campaign Start Date","formControlName","campaignStartDate","name","fromDate","ngbDatepicker","","readonly","",1,"form-control","bg-search","btn-outline-secondary",3,"maxDate","minDate","dateSelect"],["fromDate","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar-check-o"],["formControlName","triggerTime",3,"meridian","spinners"],["placeholder","Campaign End Date","name","endDate","formControlName","campaignEndDate","ngbDatepicker","","readonly","",1,"form-control","bg-search","btn-outline-secondary",3,"maxDate","minDate","dateSelect"],["endDate","ngbDatepicker"],["type","button",1,"btn","submit-btn","shadow",3,"disabled","click"],["class","spinner-border","style","width: 2rem; height: 2rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["aria-hidden","true",1,"spinner-border",2,"width","2rem","height","2rem"]],template:function(e,t){if(1&e){var n=i.Vb();i.Ub(0,"div",0),i.Ub(1,"div",1),i.Ub(2,"form",2),i.Ub(3,"div",3),i.Ub(4,"label"),i.Ic(5,"Campaign Start Date"),i.Tb(),i.Ub(6,"div",4),i.Ub(7,"input",5,6),i.gc("dateSelect",(function(e){return t.onFromDateChange(e)})),i.Tb(),i.Ub(9,"div",7),i.Ub(10,"button",8),i.gc("click",(function(){return i.zc(n),i.xc(8).toggle()})),i.Qb(11,"i",9),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(12,"div",3),i.Ub(13,"label"),i.Ic(14,"Trigger Time"),i.Tb(),i.Qb(15,"ngb-timepicker",10),i.Tb(),i.Ub(16,"div",3),i.Ub(17,"label"),i.Ic(18,"Campaign End Date"),i.Tb(),i.Ub(19,"div",4),i.Ub(20,"input",11,12),i.gc("dateSelect",(function(e){return t.onToDateChange(e)})),i.Tb(),i.Ub(22,"div",7),i.Ub(23,"button",8),i.gc("click",(function(){return i.zc(n),i.xc(21).toggle()})),i.Qb(24,"i",9),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(25,"button",13),i.gc("click",(function(){return t.onSubmit()})),i.Gc(26,G,1,0,"span",14),i.Gc(27,A,2,1,"span",15),i.Tb(),i.Tb(),i.Tb(),i.Tb()}2&e&&(i.Bb(2),i.pc("formGroup",t.form),i.Bb(5),i.pc("maxDate",t.fromMaxDate)("minDate",t.fromMinDate),i.Bb(8),i.pc("meridian",!1)("spinners",!1),i.Bb(5),i.pc("maxDate",t.toMaxDate)("minDate",t.toMinDate),i.Bb(5),i.pc("disabled",t.form.invalid||t.loading),i.Bb(1),i.pc("ngIf",t.loading),i.Bb(1),i.pc("ngIf",!t.loading))},directives:[c.u,c.m,c.g,c.b,r.b,c.l,c.e,r.k,a.m],styles:["form[_ngcontent-%COMP%]{width:50%;margin:auto;text-align:left}.bg-search[_ngcontent-%COMP%]{background-color:#fff!important;color:#6c757d}.submit-btn[_ngcontent-%COMP%]{width:-webkit-fill-available;color:#fff;background-color:#97144d;border:1px solid #97144d;padding:10px;margin-top:10px;font-size:18px}"]}),V);function L(e,t){1&e&&(i.Ub(0,"span",7),i.Ic(1,"Dashboard"),i.Tb())}function z(e,t){1&e&&i.Qb(0,"app-dashboard")}function Q(e,t){1&e&&(i.Ub(0,"span",7),i.Ic(1,"Message Template"),i.Tb())}function N(e,t){1&e&&i.Qb(0,"app-message-template")}function R(e,t){1&e&&(i.Ub(0,"span",7),i.Ic(1,"Promotional Template"),i.Tb())}function q(e,t){1&e&&i.Qb(0,"app-promotional-template")}function J(e,t){1&e&&(i.Ub(0,"span",7),i.Ic(1,"Pre Approved Offers"),i.Tb())}function X(e,t){1&e&&i.Qb(0,"app-pre-approved-offers")}var K,$,Y,H=[{path:"",component:(K=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),K.\u0275fac=function(e){return new(e||K)},K.\u0275cmp=i.Jb({type:K,selectors:[["app-marketing-maker"]],decls:17,vars:0,consts:[[1,"main"],[1,"container"],[1,"row"],[1,"col","card","shadow","p-0"],["justify","justified"],["ngbTabTitle",""],["ngbTabContent",""],[1,"tab-title"]],template:function(e,t){1&e&&(i.Ub(0,"div",0),i.Ub(1,"div",1),i.Ub(2,"div",2),i.Ub(3,"div",3),i.Ub(4,"ngb-tabset",4),i.Ub(5,"ngb-tab"),i.Gc(6,L,2,0,"ng-template",5),i.Gc(7,z,1,0,"ng-template",6),i.Tb(),i.Ub(8,"ngb-tab"),i.Gc(9,Q,2,0,"ng-template",5),i.Gc(10,N,1,0,"ng-template",6),i.Tb(),i.Ub(11,"ngb-tab"),i.Gc(12,R,2,0,"ng-template",5),i.Gc(13,q,1,0,"ng-template",6),i.Tb(),i.Ub(14,"ngb-tab"),i.Gc(15,J,2,0,"ng-template",5),i.Gc(16,X,1,0,"ng-template",6),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb())},directives:[r.j,r.g,r.i,r.h,C,M,F,j],styles:[".tab-title[_ngcontent-%COMP%]{font-size:18px}"]}),K),pathMatch:"full"}],Z=(($=function e(){_classCallCheck(this,e)}).\u0275mod=i.Nb({type:$}),$.\u0275inj=i.Mb({factory:function(e){return new(e||$)},imports:[[o.e.forChild(H)],o.e]}),$),W=n("PCNd"),ee=n("hctd"),te=((Y=function e(){_classCallCheck(this,e)}).\u0275mod=i.Nb({type:Y}),Y.\u0275inj=i.Mb({factory:function(e){return new(e||Y)},imports:[[a.c,Z,W.a,ee.a]]}),Y)}}]);