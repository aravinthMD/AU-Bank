function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{JrXR:function(e,t,i){"use strict";i.r(t),i.d(t,"ManageUsersModule",(function(){return w}));var n=i("ofXK"),s=i("PCNd"),r=i("tyNb"),c=i("y1cd"),a=i("3Pt+"),o=i("fXoL"),l=i("1kSV"),u=i("kmKP"),b=i("SaRM"),d=i("mAmA");function h(e,t){if(1&e){var i=o.Sb();o.Rb(0,"label",18),o.Rb(1,"input",19),o.dc("change",(function(e){o.uc(i);var n=t.$implicit;return o.fc().onChange(e,n)})),o.Qb(),o.Rb(2,"span",20),o.Cc(3),o.Qb(),o.Qb()}if(2&e){var n=t.$implicit;o.zb(1),o.mc("id",n.title),o.zb(2),o.Dc(n.title)}}function f(e,t){1&e&&o.Nb(0,"span",21)}function g(e,t){if(1&e&&(o.Rb(0,"span"),o.Cc(1),o.Qb()),2&e){var i=o.fc();o.zb(1),o.Dc(i.updateButtonText)}}var v,p=((v=function(){function e(t,i,n,s,r){_classCallCheck(this,e),this.formBuilder=t,this.ngbActiveModal=i,this.userService=n,this.referenceService=s,this.toasterService=r,this.updateButtonText=c.b.UPDATE_BUTTON_TEXT,this.cancelButtonText=c.b.CANCEL_BUTTON_TEXT,this.loading=!1,this.accessControls=[],this.selectedMenuList=[],this.form=this.formBuilder.group({userId:["",[a.q.required]],accessMenus:[""]})}return _createClass(e,[{key:"ngOnInit",value:function(){this.accessControls=this.referenceService.getAvailableAccessControls(),this.fetchUserActivityByUserId()}},{key:"fetchUserActivityByUserId",value:function(){var e=this;this.loading=!0,this.userService.fetchUserActivityByUserId(this.userId).subscribe((function(t){var i=t.ProcessVariables,n=i.status,s=i.message,r=void 0===s?{}:s;n?(e.setForm(t),e.loading=!1):(e.loading=!1,e.toasterService.showError(r.value))}),(function(t){e.loading=!1,e.toasterService.showError(t)}))}},{key:"setForm",value:function(e){var t=e.ProcessVariables,i=t.activityList,n=t.roleName,s=t.userName;this.userDetail={activityList:i,roleName:n,userName:s},this.form.patchValue({userId:s}),this.validateAndSetAttributes()}},{key:"validateAndSetAttributes",value:function(){var e=this.userDetail.activityList,t=e.find((function(e){return 1===e})),i=e.find((function(e){return 2===e})),n=e.find((function(e){return 3===e})),s=e.find((function(e){return 4===e})),r=document.getElementById("checkboxes").getElementsByTagName("input");t&&(r[0].checked=!0,this.selectedMenuList.push(1)),i&&(r[1].checked=!0,this.selectedMenuList.push(2)),n&&(r[2].checked=!0,this.selectedMenuList.push(3)),s&&(r[3].checked=!0,this.selectedMenuList.push(4)),this.validate()}},{key:"onChange",value:function(e,t){if(e.target.checked)this.selectedMenuList.push(t.value);else{var i=this.selectedMenuList.findIndex((function(e){return e===t.value}));this.selectedMenuList.splice(i,1)}this.validate()}},{key:"validate",value:function(){var e=this.selectedMenuList.find((function(e){return 3===e})),t=this.selectedMenuList.find((function(e){return 4===e})),i=document.getElementById(c.d.MARKETING_MAKER),n=document.getElementById(c.d.MARKETING_CHECKER);e&&!t?n.setAttribute("disabled","true"):t&&!e?i.setAttribute("disabled","true"):(i.removeAttribute("disabled"),n.removeAttribute("disabled"))}},{key:"updateUser",value:function(){var e=this;this.loading=!0,this.userService.updateUser(this.userId,this.selectedMenuList,Number(this.userService.currentUserValue.userId)).subscribe((function(t){var i=t.ProcessVariables.status,n=t.ProcessVariables.message,s=void 0===n?{}:n;i?(e.toasterService.showSuccess(c.j.UPDATE_USER_SUCCESS),e.loading=!1,e.close(c.g.SUCCESS)):(e.loading=!1,e.toasterService.showError(s.value))}),(function(t){e.loading=!1,e.toasterService.showError(t)}))}},{key:"close",value:function(e){this.ngbActiveModal.close(e)}},{key:"fieldControls",get:function(){return this.form.controls}}]),e}()).\u0275fac=function(e){return new(e||v)(o.Mb(a.c),o.Mb(l.a),o.Mb(u.a),o.Mb(b.a),o.Mb(d.a))},v.\u0275cmp=o.Gb({type:v,selectors:[["app-user-dialog"]],inputs:{userId:"userId"},decls:25,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],[1,"text-message"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form",3,"formGroup"],[1,"form-group"],["for","userId"],[1,"input-group"],["type","text","formControlName","userId","id","userId","placeholder","Eg: USER0001","autocomplete","off","readonly","",1,"form-control"],["id","checkboxes",1,"row","d-flex"],["class","col-6 checkbox-inline container-checkbox",4,"ngFor","ngForOf"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-confirm","shadow",3,"disabled","click"],["class","spinner-border","style","width: 1rem; height: 1rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-danger","shadow",3,"click"],[1,"col-6","checkbox-inline","container-checkbox"],["type","checkbox","formControlName","accessMenus",1,"mx-1","checkbox-input",3,"id","change"],[1,"checkbox-title"],["aria-hidden","true",1,"spinner-border",2,"width","1rem","height","1rem"]],template:function(e,t){1&e&&(o.Rb(0,"div",0),o.Rb(1,"h4",1),o.Cc(2," Edit User - "),o.Rb(3,"span",2),o.Cc(4),o.Qb(),o.Qb(),o.Rb(5,"button",3),o.dc("click",(function(){return t.close()})),o.Rb(6,"span",4),o.Cc(7,"\xd7"),o.Qb(),o.Qb(),o.Qb(),o.Rb(8,"div",5),o.Rb(9,"form",6),o.Rb(10,"div",7),o.Rb(11,"label",8),o.Cc(12,"USER ID"),o.Qb(),o.Rb(13,"div",9),o.Nb(14,"input",10),o.Qb(),o.Qb(),o.Rb(15,"label"),o.Cc(16,"ACCESS CONTROLS"),o.Qb(),o.Rb(17,"div",11),o.Ac(18,h,4,2,"label",12),o.Qb(),o.Qb(),o.Qb(),o.Rb(19,"div",13),o.Rb(20,"button",14),o.dc("click",(function(){return t.updateUser()})),o.Ac(21,f,1,0,"span",15),o.Ac(22,g,2,1,"span",16),o.Qb(),o.Rb(23,"button",17),o.dc("click",(function(){return t.close()})),o.Cc(24),o.Qb(),o.Qb()),2&e&&(o.zb(4),o.Dc(t.userDetail&&t.userDetail.userName),o.zb(5),o.lc("formGroup",t.form),o.zb(9),o.lc("ngForOf",t.accessControls),o.zb(2),o.lc("disabled",t.form.invalid||0===t.selectedMenuList.length||t.loading),o.zb(1),o.lc("ngIf",t.loading),o.zb(1),o.lc("ngIf",!t.loading),o.zb(2),o.Ec(" ",t.cancelButtonText," "))},directives:[a.s,a.l,a.g,a.b,a.k,a.e,n.j,n.k,a.a],styles:[".checkbox-title[_ngcontent-%COMP%]{font-size:16px;color:#212529}"]}),v);function m(e,t){1&e&&o.Nb(0,"span",11)}function C(e,t){if(1&e&&(o.Rb(0,"span"),o.Cc(1),o.Qb()),2&e){var i=o.fc();o.zb(1),o.Dc(i.disableButtonText)}}var S,k=((S=function(){function e(t,i,n){_classCallCheck(this,e),this.ngbActiveModal=t,this.userService=i,this.toasterService=n,this.disableButtonText=c.b.DISABLE_BUTTON_TEXT,this.cancelButtonText=c.b.CANCEL_BUTTON_TEXT,this.loading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"disableUser",value:function(){var e=this;this.loading=!0,this.userService.disableUserById(this.userId,Number(this.userService.currentUserValue.userId)).subscribe((function(t){var i=t.ProcessVariables.status,n=t.ProcessVariables.message,s=void 0===n?{}:n;i?(e.toasterService.showSuccess(c.j.DISABLE_USER_SUCCESS),e.loading=!1,e.close(c.g.SUCCESS)):(e.loading=!1,e.toasterService.showError(s.value))}),(function(t){e.loading=!1,e.toasterService.showError(t)}))}},{key:"close",value:function(e){this.ngbActiveModal.close(e)}}]),e}()).\u0275fac=function(e){return new(e||S)(o.Mb(l.a),o.Mb(u.a),o.Mb(d.a))},S.\u0275cmp=o.Gb({type:S,selectors:[["app-disable-user-dialog"]],inputs:{userId:"userId",userName:"userName"},decls:15,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"text-message"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-confirm","shadow",3,"disabled","click"],["class","spinner-border","style","width: 1rem; height: 1rem;","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-danger","shadow",3,"click"],["aria-hidden","true",1,"spinner-border",2,"width","1rem","height","1rem"]],template:function(e,t){1&e&&(o.Rb(0,"div",0),o.Rb(1,"h4",1),o.Cc(2," Do you want to disable user? "),o.Qb(),o.Rb(3,"button",2),o.dc("click",(function(){return t.close()})),o.Rb(4,"span",3),o.Cc(5,"\xd7"),o.Qb(),o.Qb(),o.Qb(),o.Rb(6,"div",4),o.Rb(7,"span",5),o.Cc(8),o.Qb(),o.Qb(),o.Rb(9,"div",6),o.Rb(10,"button",7),o.dc("click",(function(){return t.disableUser()})),o.Ac(11,m,1,0,"span",8),o.Ac(12,C,2,1,"span",9),o.Qb(),o.Rb(13,"button",10),o.dc("click",(function(){return t.close()})),o.Cc(14),o.Qb(),o.Qb()),2&e&&(o.zb(8),o.Ec("Any information associated with account ",t.userName," will be deleted."),o.zb(2),o.lc("disabled",t.loading),o.zb(1),o.lc("ngIf",t.loading),o.zb(1),o.lc("ngIf",!t.loading),o.zb(2),o.Ec(" ",t.cancelButtonText," "))},directives:[n.k],styles:[""]}),S);function R(e,t){1&e&&o.Nb(0,"ngb-progressbar",13),2&e&&o.lc("value",100)("striped",!0)("animated",!0)}function y(e,t){if(1&e){var i=o.Sb();o.Rb(0,"tr",6),o.Rb(1,"td",7),o.Cc(2),o.Qb(),o.Rb(3,"td",8),o.Cc(4),o.Qb(),o.Rb(5,"td",8),o.Cc(6),o.Qb(),o.Rb(7,"td",8),o.Cc(8),o.gc(9,"date"),o.Qb(),o.Rb(10,"td",9),o.Rb(11,"button",14),o.dc("click",(function(){o.uc(i);var e=t.$implicit;return o.fc().editUser(e)})),o.Cc(12),o.Qb(),o.Rb(13,"button",15),o.dc("click",(function(){o.uc(i);var e=t.$implicit;return o.fc().disableUser(e)})),o.Cc(14),o.Qb(),o.Qb(),o.Qb()}if(2&e){var n=t.$implicit,s=t.index,r=o.fc();o.zb(2),o.Dc(s+1),o.zb(2),o.Dc(n.username),o.zb(2),o.Dc(n.role),o.zb(2),o.Dc(o.ic(9,6,n.created_at,"medium")),o.zb(4),o.Ec(" ",r.editButtontext," "),o.zb(2),o.Ec(" ",r.disableUserButtonText," ")}}var E,Q,I,U=[{path:"",component:(E=function(){function e(t,i,n){_classCallCheck(this,e),this.ngbDialog=t,this.userService=i,this.toasterService=n,this.editButtontext=c.b.EDIT_BUTTON_TEXT,this.disableUserButtonText=c.b.DISABLE_BUTTON_TEXT,this.loading=!1,this.currentPage=1,this.pageSize=10}return _createClass(e,[{key:"ngOnInit",value:function(){this.fetchUsers(this.currentPage)}},{key:"fetchUsers",value:function(e){var t=this;window.scroll(0,0),this.loading=!0,this.userService.fetchUsers(this.pageSize,e).subscribe((function(e){var i=e.ProcessVariables,n=i.status,s=i.message,r=void 0===s?{}:s;if(n){var c=e.ProcessVariables,a=c.usersList,o=c.totalCount;t.collectionSize=o,t.usersList=a,t.loading=!1}else t.loading=!1,t.toasterService.showError(r.value)}),(function(e){t.loading=!1,t.toasterService.showError(e)}))}},{key:"editUser",value:function(e){var t=this,i=e.userId,n=this.ngbDialog.open(p,{centered:!0});n.componentInstance.userId=i,n.result.then((function(e){e===c.g.SUCCESS&&t.fetchUsers(t.currentPage)}))}},{key:"disableUser",value:function(e){var t=this,i=e.userId,n=e.username,s=this.ngbDialog.open(k,{centered:!0});s.componentInstance.userId=i,s.componentInstance.userName=n,s.result.then((function(e){e===c.g.SUCCESS&&t.fetchUsers(t.currentPage)}))}}]),e}(),E.\u0275fac=function(e){return new(e||E)(o.Mb(l.c),o.Mb(u.a),o.Mb(d.a))},E.\u0275cmp=o.Gb({type:E,selectors:[["app-manage-users"]],decls:23,vars:6,consts:[[1,"main"],[1,"container"],[1,"row"],[1,"col","card","shadow","p-0","mt-2"],["type","dark","height","0.5rem",3,"value","striped","animated",4,"ngIf"],[1,"table","table-striped"],[1,"d-flex"],[1,"col-1"],[1,"col-3"],[1,"col-2"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","p-2"],[3,"boundaryLinks","collectionSize","page","pageSize","pageChange"],["type","dark","height","0.5rem",3,"value","striped","animated"],[1,"shadow",3,"click"],[1,"ml-2","shadow",3,"click"]],template:function(e,t){1&e&&(o.Rb(0,"div",0),o.Rb(1,"h2"),o.Cc(2,"Manage Users"),o.Qb(),o.Rb(3,"div",1),o.Rb(4,"div",2),o.Rb(5,"div",3),o.Ac(6,R,1,3,"ngb-progressbar",4),o.Rb(7,"table",5),o.Rb(8,"thead"),o.Rb(9,"tr",6),o.Rb(10,"th",7),o.Cc(11,"S.NO"),o.Qb(),o.Rb(12,"th",8),o.Cc(13,"USER ID"),o.Qb(),o.Rb(14,"th",8),o.Cc(15,"ROLE"),o.Qb(),o.Rb(16,"th",8),o.Cc(17,"CREATED ON"),o.Qb(),o.Rb(18,"th",9),o.Cc(19,"ACTION"),o.Qb(),o.Qb(),o.Qb(),o.Ac(20,y,15,9,"tr",10),o.Qb(),o.Rb(21,"div",11),o.Rb(22,"ngb-pagination",12),o.dc("pageChange",(function(e){return t.currentPage=e}))("pageChange",(function(){return t.fetchUsers(t.currentPage)})),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&e&&(o.zb(6),o.lc("ngIf",t.loading),o.zb(14),o.lc("ngForOf",t.usersList),o.zb(2),o.lc("boundaryLinks",!0)("collectionSize",t.collectionSize)("page",t.currentPage)("pageSize",t.pageSize))},directives:[n.k,n.j,l.e,l.f],pipes:[n.d],styles:["table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;font-size:14px;background-color:#97144d;border:1px solid #97144d}"]}),E),pathMatch:"full"}],T=((I=function e(){_classCallCheck(this,e)}).\u0275mod=o.Kb({type:I}),I.\u0275inj=o.Jb({factory:function(e){return new(e||I)},imports:[[r.e.forChild(U)],r.e]}),I),w=((Q=function e(){_classCallCheck(this,e)}).\u0275mod=o.Kb({type:Q}),Q.\u0275inj=o.Jb({factory:function(e){return new(e||Q)},imports:[[n.b,s.a,T]]}),Q)}}]);